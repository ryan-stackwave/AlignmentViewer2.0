(this["webpackJsonpalignment-viewer-2"]=this["webpackJsonpalignment-viewer-2"]||[]).push([[0],{35:function(e,t,n){e.exports=n(59)},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},46:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),o=n.n(i),s=(n(40),n(9)),l=n(1),c=n(2),u=n(8),d=n(5),h=n(4),f=(n(41),n(10)),m=n(15);function g(e){var t=document.createElement("canvas").getContext("2d");t.fillStyle=e;var n=t.fillStyle;n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return"#"+t+t+n+n+a+a}));var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return{hex:n,rgb:{red:parseInt(a[1],16),green:parseInt(a[2],16),blue:parseInt(a[3],16)}}}function p(e,t){return e.reduce((function(e,n){var a=t(n),r=e.get(a)?e.get(a):[];return e.set(a,[].concat(Object(m.a)(r),[n])),e}),new Map)}var y=n(20),v=n.n(y),S=n(7),L=n.n(S),b=E("aa"),C=E("nt");function E(e){return Object.keys(L.a).reduce((function(t,n){if(-1!==n.indexOf(e+"StyClass_")){var a=n.split(e+"StyClass_")[1],r=L.a[e+"StyColorOrder_"+a].replace(/ /g,"").split(","),i=L.a[e+"StyColors_"+a].replace(/ /g,"").split(","),o=L.a[e+"StyDesc_"+a];t.push({commonName:a,description:o,className:L.a[n],backgroundAlpha:parseFloat(L.a[e+"StyBGAlpha_"+a]),colors:Object.fromEntries(r.map((function(e,t){return[r[t],i[t]]})))})}return t}),[])}var O=function(){function e(t,n,a,r){Object(l.a)(this,e),this.key=t,this.description=n,this.className=a,this.allColorSchemes=r}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();O.AMINOACID=new O("aminoacid-alignment","Amino Acid Sequences",L.a.aaAlignTypeClass,b),O.NUCLEOTIDE=new O("nucleotide-alignment","Nucleotide Sequences",L.a.ntAlignTypeClass,C),O.list=[O.AMINOACID,O.NUCLEOTIDE];var T=function(){function e(t,n,a){Object(l.a)(this,e),this.key=t,this.description=n,this.className=a}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();T.ALL=new T("all","All",L.a.styPosAllClass),T.QUERY=new T("query","Same as Query",L.a.styPosQueryClass),T.QUERY_DIFF=new T("query-diff","Different from Query",L.a.styPosQueryDiffClass),T.CONSENSUS=new T("consensus","Same as Consensus",L.a.styPosConsensusClass),T.CONSENSUS_DIFF=new T("consensus-diff","Different from Consensus",L.a.styPosConsensusDiffClass),T.list=[T.ALL,T.QUERY,T.QUERY_DIFF,T.CONSENSUS,T.CONSENSUS_DIFF];var w=function(){function e(t,n,a){Object(l.a)(this,e),this.key=t,this.description=n,this.className=a}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();w.LIGHT=new w("light","Light",L.a.lightHueClass),w.DARK=new w("dark","Dark",L.a.darkHueClass),w.NO_BACKGROUND=new w("lettersonly","Letters Only",L.a.lettersOnlyHueClass),w.list=[w.DARK,w.LIGHT,w.NO_BACKGROUND];var k=function(){function e(){Object(l.a)(this,e),this.alignmentType=void 0,this.colorScheme=void 0,this.positionsToStyle=void 0,this.residueDetail=void 0}return Object(c.a)(e,null,[{key:"fromAlignmentType",value:function(e){return e===O.AMINOACID?new A:new N}}]),e}(),A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.ALL,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.LIGHT;Object(l.a)(this,e),this.colorScheme=t,this.positionsToStyle=n,this.residueDetail=a,this.allColorSchemes=b,this.alignmentType=O.AMINOACID},N=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.ALL,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.LIGHT;Object(l.a)(this,e),this.colorScheme=t,this.positionsToStyle=n,this.residueDetail=a,this.allColorSchemes=C,this.alignmentType=O.NUCLEOTIDE},M=(L.a.darkHueClass,L.a.lightHueClass,L.a.aceResidueParentClass);function _(e){for(var t="",n=32;n<=126;n++)t+=String.fromCharCode(n);return t.split("").reduce((function(t,n){var a="."===n?"dot":n,r=e?a:L.a.acePrefix+a;return t.set(n,new Map([[!0,new Map([[!0,r+" "+L.a.preAceConsensusClass+" "+L.a.preAceQueryClass],[!1,r+" "+L.a.preAceConsensusClass]])],[!1,new Map([[!0,r+" "+L.a.preAceQueryClass],[!1,r]])]])),t}),new Map)}var j=_(!1),D=_(!0);function P(e,t,n,a){return a?D.get(e).get(t).get(n):j.get(e).get(t).get(n)}var I=function(){function e(){Object(l.a)(this,e),this.letterToGlyphHM={A:e.A,B:e.B,C:e.C,D:e.D,E:e.E,F:e.F,G:e.G,H:e.H,I:e.I,J:e.J,K:e.K,L:e.L,M:e.M,N:e.N,O:e.O,P:e.P,Q:e.Q,R:e.R,S:e.S,T:e.T,U:e.U,V:e.V,W:e.W,X:e.X,Y:e.Y,Z:e.Z}}return Object(c.a)(e,null,[{key:"glyphFromChar",value:function(t){return e.singleton||(e.singleton=new e),e.singleton.letterToGlyphHM[t]}}]),e}();I.singleton=void 0,I.A=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 33 0 L 66 0 L 100 100 L 75 100 L 66 75 L 33 75 L 25 100 L 0 100"})),r.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 41 55 L 50 25 L 58 55 L 41 55"}))},I.B=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 105 50 105 100 80 100 L 00 100 L 0 0"})),r.a.createElement("path",{key:e.key+"_p2",transform:e.transform,d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15",fill:"#ffffff"}),r.a.createElement("path",{key:e.key+"_p3",transform:e.transform,d:"M 20 65 L 70 65 C 80 65 80 85 70 85 L 20 85 L 20 65",fill:"#ffffff"}))},I.C=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 10 75 28 L 100 28"}))},I.D=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 60 0 C 110 0 110 100 60 100 L 0 100 L 0 0"})),r.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 40 15 C 85 15 85 85 40 85 L 20 85 L 20 15"}))},I.E=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 90 40 L 90 60 L 20 60 L 20 80 L 100 80 L 100 100 L 0 100 L 0 0"}))},I.F=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 80 40 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},I.G=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 100 48 L 55 48 L 55 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 5 75 28 L 100 28"}))},I.H=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 80 40 L 80 0 L 100 0 L 100 100 L 80 100 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},I.I=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 40 0 L 60 0 L 60 100 L 40 100 L 40 0"}))},I.J=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60"}))},I.K=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 75 0 L 100 0 L 50 50 L 100 100 L 75 100 L 30 65 L 20 75 L 20 100 L 0 100 L 0 0"}))},I.L=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 100 L 100 100 L 100 80 L 20 80 L 20 0 L 0 0"}))},I.M=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 35 L 80 0 L 100 0 L 100 100 L 80 100 L 80 30 L 50 65 L 20 30 L 20 100 L 0 100 L 0 0"}))},I.N=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 0 0 L 20 0 L 80 75 L 80 0 L 100 0 L 100 100 L 80 100 L 20 25 L 20 100 L 0 100"}))},I.O=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},e)),r.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}))},I.P=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 L 20 50 L 20 100 L 0 100 L 0 0"})),r.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},I.Q=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},Object(s.a)({},e,{key:e.key+"_c1"}))),r.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}),r.a.createElement("path",Object.assign({d:"M 85 100 L 55 70 L 70 55 L 100 85 L 85 100"},e)))},I.R=function(e){return r.a.createElement("g",{key:e.key+"_g"},r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 100 50 100 70 100 70 L 100 100 L 80 100 L 80 80 C 80 80 80 60 50 60 L 20 60 L 20 100 L 0 100 L 0 0"})),r.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},I.S=function(e){return e.stroke||(e.stroke=e.fill),e.strokeOpacity||(e.strokeOpacity=e.fillOpacity),r.a.createElement("path",Object.assign({fill:"#ffffff"},e,{strokeWidth:"18",d:"M92 26 A43 20 0 1 0 43 46 A42 23 0 1 1 9 68"}))},I.T=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 20 L 35 20 L 35 100 L 65 100 L 65 20 L 100 20 L 100 0 L 0 0"}))},I.U=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60 L 25 0 L 0 0"}))},I.V=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 80 L 80 0 L 100 0 L 60 100 L 40 100 L 0 0"}))},I.W=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 30 70 L 50 30 L 70 70 L 80 0 L 100 0 L 90 100 L 70 100 L 50 65 L 30 100 L 10 100 L 0 0"}))},I.X=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 40 L 80 0 L 100 0 L 70 50 L 100 100 L 80 100 L 50 60 L 20 100 L 0 100 L 30 50 L 0 0"}))},I.Y=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 45 L 80 0 L 100 0 L 60 60 L 60 100 L 40 100 L 40 60 L 0 0"}))},I.Z=function(e){return r.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 35 80 L 100 80 L 100 100 L 0 100 L 0 80 L 65 20 L 0 20 L 0 0"}))};var x=function(){function e(t,n,a){Object(l.a)(this,e),this.singleLetterCode=t,this.threeLetterCode=n,this.fullName=a,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.threeLetterCode=n,this.fullName=a,this.glyph=I.glyphFromChar(t),this.colors=b.reduce((function(e,n){var a=Object.entries(n.colors).find((function(e){var n=Object(f.a)(e,2),a=n[0];n[1];return a===t})),r="#ffffff";a&&(r=a[1]);var i=g(r);return e[n.commonName]={hexString:i.hex,rgb:i.rgb,backgroundAlpha:n.backgroundAlpha},e}),{})}return Object(c.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t in this.bySingleLetterCode?e.bySingleLetterCode[t]:e.UNKNOWN}},{key:"fromThreeLetterCode",value:function(t){return t in this.byThreeLetterCode?e.byThreeLetterCode[t]:e.UNKNOWN}}]),e}();x.canonicalAminoAcids=[new x("A","ALA","Alanine"),new x("R","ARG","Arginine"),new x("N","ASN","Asparagine"),new x("D","ASP","Aspartic Acid"),new x("C","CYS","Cysteine"),new x("Q","GLU","Glutamine"),new x("E","GLN","Glutamic Acid"),new x("G","GLY","Glycine"),new x("H","HIS","Histidine"),new x("I","ILE","Isoleucine"),new x("L","LEU","Leucine"),new x("K","LYS","Lysine"),new x("M","MET","Methionine"),new x("F","PHE","Phenylalanine"),new x("P","PRO","Proline"),new x("S","SER","Serine"),new x("T","THR","Threonine"),new x("W","TRP","Tryptophan"),new x("Y","TYR","Tyrosine"),new x("V","VAL","Valine"),new x("X","UKN","Unknown")],x.bySingleLetterCode=x.canonicalAminoAcids.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),x.byThreeLetterCode=x.canonicalAminoAcids.reduce((function(e,t){return e[t.threeLetterCode]=t,e}),{}),x.UNKNOWN=x.bySingleLetterCode.X;var H,B=function(){function e(t,n){Object(l.a)(this,e),this.singleLetterCode=t,this.fullName=n,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.fullName=n,this.glyph=I.glyphFromChar(t),this.colors=C.reduce((function(e,n){var a=Object.entries(n.colors).find((function(e){var n=Object(f.a)(e,2),a=n[0];n[1];return a===t})),r="#ffffff";a&&(r=a[1]);var i=g(r);return e[n.commonName]={hexString:i.hex,rgb:i.rgb,backgroundAlpha:n.backgroundAlpha},e}),{})}return Object(c.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t=t.toUpperCase(),this.bySingleLetterCode[t]?e.bySingleLetterCode[t]:e.UNKNOWN}}]),e}();B.allNucleotides=[new B("A","Adenine"),new B("C","Cytosine"),new B("G","Guanine"),new B("T","Thymidine"),new B("U","Uracil"),new B("R","Purine"),new B("Y","Pyrimidine"),new B("X","Unknown")],B.bySingleLetterCode=B.allNucleotides.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),B.UNKNOWN=B.bySingleLetterCode.X,function(e){e[e.hamming=0]="hamming"}(H||(H={}));var q=function(){function e(t,n,a,r){Object(l.a)(this,e),this.key=t,this.description=n,this.isTargetSequenceDependent=a,this.distanceFn=r}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();q.INPUT=new q("as-input","As input",!1),q.HAMMING_DIST_TARGET=new q("hamming-dist-to-target","Hamming distance to target sequence",!0,H.hamming),q.list=[q.INPUT,q.HAMMING_DIST_TARGET];var R,G=function(){function e(t,n){Object(l.a)(this,e),this.uuid=void 0,this.aceEditorMode=void 0,this.name=void 0,this.predictedNT=void 0,this.sequences=void 0,this.targetSequence=void 0,this.positionalLetterCounts=new Map,this.globalAlphaLetterCounts={},this.allUpperAlphaLettersInAlignmentSorted=void 0,this.consensus=[],this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(parseInt(e)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(e)/4).toString(16)})),this.name=t,this.sequences=new Map,this.sequences.set(q.INPUT,n),this.targetSequence=n[0],this.predictedNT=!0;for(var a=new Date,r={},i=0;i<n.length;i++)for(var o=n[i].sequence,s=0;s<o.length;s++){var c=o[s],u=!!c.match(/[a-z]/i);u&&this.predictedNT&&B.fromSingleLetterCode(c)===B.UNKNOWN&&(this.predictedNT=!1);var d=s;r[c]=1;var h=this.positionalLetterCounts.get(d);h||(h={},this.positionalLetterCounts.set(d,h)),c in h===!1&&(h[c]=0),h[c]+=1,u&&(c in this.globalAlphaLetterCounts===!1&&(this.globalAlphaLetterCounts[c]=0),this.globalAlphaLetterCounts[c]+=1)}this.allUpperAlphaLettersInAlignmentSorted=Object.keys(r).sort().reduce((function(e,t){return t.match(/[A-Z]/)&&e.push(t),e}),[]),this.consensus=Array.from(this.positionalLetterCounts).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object.keys(a).reduce((function(e,t){var n=e.match(/[a-z]/i),r=t.match(/[a-z]/i);return n&&!r?e:r&&!n?t:a[e]>a[t]?e:t}));return{position:n,letter:r,occurrences:a[r]}})),console.log("done parsing alignment. took "+((new Date).getTime()-a.getTime())+"ms")}return Object(c.a)(e,null,[{key:"getSequenceDistance",value:function(e,t,n){var a=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length,r=0;if(n===H.hamming){for(var i=0;i<a;i++)e.sequence[i]!==t.sequence[i]&&(r+=1);return r}throw Error("Unable to determine sequence distance with distance function "+n)}},{key:"normalizeLetterCounts",value:function(e,t){var n=Object.keys(e).reduce((function(n,a){return t&&!t.includes(a)||(n+=e[a]),n}),0);return Object.keys(e).reduce((function(a,r){return t&&!t.includes(r)||(a[r]=e[r]/n),a}),{})}}]),Object(c.a)(e,[{key:"getPredictedType",value:function(){return this.predictedNT?O.NUCLEOTIDE:O.AMINOACID}},{key:"getDefaultStyle",value:function(){return this.predictedNT?new N:new A}},{key:"getUUID",value:function(){return this.uuid}},{key:"getName",value:function(){return this.name}},{key:"getAceEditorMode",value:function(){return this.aceEditorMode||(this.aceEditorMode="ace/mode/"+this.uuid,function(e,t){var n=e.split("/");if(3!==n.length||"ace"!==n[0]||"mode"!==n[1])throw Error("ace mode name must be of the form '/ace/mode/MODENAME'");var a=e.split("/")[2];v.a.define("ace/mode/"+a+"_highlight_rules",(function(e,n,a){var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,o=function(){for(var e={},n=/./,a=function(a){var r=0===a?"start":"p"+a,i=a===t.getMaxSequenceLength()-1?"start":"p"+(a+1);e[r]=[{token:function(e){return P(e,e===t.getConsensus()[a].letter,e===t.getTargetSequence().sequence[a],!0)},regex:n,next:i}]},r=0;r<t.getMaxSequenceLength();r++)a(r);this.$rules=e};r.inherits(o,i),n.AlignmentHighlightRules=o})),v.a.define("ace/mode/"+a,(function(e,t,n){var r=e("../lib/oop"),i=e("../mode/text").Mode,o=e("../tokenizer").Tokenizer,s=e("ace/mode/"+a+"_highlight_rules").AlignmentHighlightRules,l=function(){this.$tokenizer=new o((new s).getRules())};r.inherits(l,i),function(){}.call(l.prototype),t.Mode=l}))}(this.aceEditorMode,this)),this.aceEditorMode}},{key:"getConsensus",value:function(){return this.consensus}},{key:"getGapsPerColumn",value:function(){return Array.from(this.positionalLetterCounts).map((function(e){var t=Object(f.a)(e,2),n=(t[0],t[1]);return isNaN(n["-"])?0:n["-"]}))}},{key:"getGapCountAtColumn",value:function(e){var t=this.positionalLetterCounts.get(e);return t&&t["-"]?t["-"]:0}},{key:"getGlobalAlphaLetterCounts",value:function(t,n){var a=this;return t?e.normalizeLetterCounts(this.globalAlphaLetterCounts,n):n?Object.keys(this.globalAlphaLetterCounts).reduce((function(e,t){return n.includes(t)&&(e[t]=a.globalAlphaLetterCounts[t]),e}),{}):this.globalAlphaLetterCounts}},{key:"getMaxSequenceLength",value:function(){return this.getSequences().reduce((function(e,t){return t.sequence.length>e&&(e=t.sequence.length),e}),-1)}},{key:"getPositionalLetterCounts",value:function(t,n){return t||n?Array.from(this.positionalLetterCounts).reduce((function(a,r){var i=Object(f.a)(r,2),o=i[0],s=i[1];return a.set(o,t?e.normalizeLetterCounts(s,n):Object.keys(s).reduce((function(e,t){return n.includes(t)&&(e[t]=s[t]),e}),{})),a}),new Map):this.positionalLetterCounts}},{key:"getSequences",value:function(e,t){if(e=e||q.INPUT,t=t||!1,!this.sequences.has(e)||t)switch(e){case q.INPUT:break;case q.HAMMING_DIST_TARGET:this.sequences.set(e,this.sortByDistanceToTargetSequence(q.HAMMING_DIST_TARGET.distanceFn));break;default:throw Error('The sortBy option provided "'.concat(e,'" is not implemented'))}return this.sequences.get(e)}},{key:"getAllUpperAlphaLettersInAlignmentSorted",value:function(){return this.allUpperAlphaLettersInAlignmentSorted}},{key:"getTargetSequence",value:function(){return this.targetSequence}},{key:"setTargetSequence",value:function(e){var t=this;if(void 0===this.getSequences().find((function(t){return t===e})))throw Error("target sequence does not exist in alignment");this.targetSequence=e,this.sequences.forEach((function(e,n){t.getSequences(n,!0)}))}},{key:"sortByDistanceToTargetSequence",value:function(t){var n=this,a=this.getSequences();switch(t){case H.hamming:return a.map((function(e){return e})).sort((function(t,a){return e.getSequenceDistance(n.targetSequence,t,H.hamming)-e.getSequenceDistance(n.targetSequence,a,H.hamming)}));default:throw Error('The distFn option provided "'.concat(t,'" is not implemented'))}}}]),e}();n(42);!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.both=2]="both"}(R||(R={}));var W,F=function(){function e(t){var n=this;Object(l.a)(this,e),this.scrollDirection=void 0,this.aceEditorDirection=void 0,this.scrollers=void 0,this.scrollFnHandles=void 0,this.handleScroll=function(e,t){n.scrollers.filter((function(t){return t!==e})).forEach((function(t){n.syncScrollPosition(e,t)}))},this.scrollDirection=t,this.aceEditorDirection=t===R.horizontal?"changeScrollLeft":"changeScrollTop",this.scrollers=[],this.scrollFnHandles=new Map}return Object(c.a)(e,[{key:"registerElementScroller",value:function(e){var t=this;this.scrollers.includes(e)||(this.scrollers.push(e),e.addEventListener("mouseenter",(function(){t.addScrollEvents(e)})),e.addEventListener("mouseleave",(function(){t.removeScrollEvents(e)})))}},{key:"registerAceScroller",value:function(e,t){var n=this;this.scrollers.includes(e)||(this.scrollers.push(e),t.addEventListener("mouseenter",(function(){n.addScrollEvents(e)})),t.addEventListener("mouseleave",(function(){n.removeScrollEvents(e)})))}},{key:"isAceEditor",value:function(e){return"renderer"in e}},{key:"syncScrollPosition",value:function(e,t){if(this.scrollDirection===R.horizontal){var n=this.isAceEditor(e)?e.session.getScrollLeft():e.scrollLeft;this.isAceEditor(t)?t.session.getScrollLeft()!==n&&t.session.setScrollLeft(n):t.scrollLeft!==n&&(t.scrollLeft=n)}else{var a=this.isAceEditor(e)?e.session.getScrollTop():e.scrollTop;this.isAceEditor(t)?t.session.getScrollTop()!==a&&t.session.setScrollTop(a):t.scrollTop!==a&&(t.scrollTop=a)}}},{key:"addScrollEvents",value:function(e){this.scrollFnHandles.has(e)||this.scrollFnHandles.set(e,this.handleScroll.bind(this,e));var t=this.scrollFnHandles.get(e);this.isAceEditor(e)?e.session.on(this.aceEditorDirection,t):e.addEventListener("scroll",t)}},{key:"removeScrollEvents",value:function(e){var t=this.scrollFnHandles.get(e);t?this.isAceEditor(e)?e.session.off(this.aceEditorDirection,t):e.removeEventListener("scroll",t):console.log("failed to remove scrollFn")}}]),e}(),U=(n(43),n(18));!function(e){e.LETTERS="Letter Stack",e.BARS="Bar Plot"}(W||(W={}));var z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).logoData=void 0,e}return Object(c.a)(n,[{key:"renderTooltip",value:function(){var e=this;return r.a.createElement(U.a,{id:"getLogoTooltip",effect:"solid",type:"light",border:!0,getContent:function(t){if(t&&e.logoData){var n=parseInt(t)+1,a=e.logoData[parseInt(t)];return 0===a.length?null:r.a.createElement("div",{className:"logo-tooltip"},r.a.createElement("h1",null,"Position: ",n),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col legend-square"}),r.a.createElement("div",{className:"col header name"},"Residue"),r.a.createElement("div",{className:"col header frequency"},"Frequency"),r.a.createElement("div",{className:"col header count"},"Count")),a.slice().reverse().map((function(e,t){return r.a.createElement("div",{key:t,className:"row"},r.a.createElement("div",{className:"col legend-square ".concat(e.letter.classNames)}),r.a.createElement("div",{className:"col name"},"".concat(e.residue.fullName," [").concat(e.letter.letter,"]")),r.a.createElement("div",{className:"col frequency"},+(100*e.frequency).toFixed(2),"%"),r.a.createElement("div",{className:"col count"},e.count))})))}}})}},{key:"renderSinglePositionStack",value:function(e,t){var n=this.props,a=n.logoType,i=n.height;return e.map((function(e,n){if(i-=100*e.frequency,a===W.BARS){var o=2/t;return r.a.createElement("rect",{width:"100",height:"100",transform:"translate(0, ".concat(i,") scale(").concat(o,",").concat(e.frequency,")"),className:e.letter.classNames,key:"idxrect_".concat(n)})}return I.glyphFromChar(e.letter.letter)({className:e.letter.classNames,transform:"translate(0, ".concat(i,") scale(").concat(.009,",").concat(e.frequency,")"),key:"idxglyph_".concat(n)})}))}},{key:"mungeLogoData",value:function(){var e=this.props.alignment,t=e.getSequences().length,n=e.getAllUpperAlphaLettersInAlignmentSorted(),a=(this.props.alignmentType?this.props.alignmentType:this.props.alignment.getPredictedType())===O.AMINOACID?x:B,r=n.reduce((function(e,t){return e[t]={letter:t,classNames:P(t,!1,!1,!1)},e}),{}),i=e.getPositionalLetterCounts(!1,n);return Array.from(i).map((function(e){var n=Object(f.a)(e,2),i=(n[0],n[1]);return Object.entries(i).map((function(e){var n=Object(f.a)(e,2),i=n[0],o=n[1];return{count:o,frequency:o/t,letter:r[i],residue:a.fromSingleLetterCode(i)}})).filter((function(e){return 0!==e.frequency})).sort((function(e,t){return e.frequency>t.frequency?1:-1}))}))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.alignment,a=t.alignmentType,r=t.logoType,i=t.glyphWidth;return!this.logoData||r!==e.logoType||i!==e.glyphWidth||n!==e.alignment||a!==e.alignmentType}},{key:"componentDidUpdate",value:function(){U.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.props,n=t.alignment,a=t.glyphWidth,i=t.height;if(!n||!a)return null;this.logoData=this.mungeLogoData();var o=this.logoData.length*a,s=i;return r.a.createElement("div",{className:"sequence-logo"},r.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(this.logoData.length," 100"),style:{width:o,height:s},xmlns:"http://www.w3.org/2000/svg"},this.logoData.map((function(t,n){return r.a.createElement("g",{transform:"translate(".concat(n,",0)"),className:M,key:"p_"+n},e.renderSinglePositionStack(t,e.logoData.length),r.a.createElement("rect",{className:"interaction-placeholder",width:"1",height:"100","data-for":"getLogoTooltip","data-tip":n,"data-class":"sequence-logo-tooltip-container"}))}))),this.renderTooltip())}}]),n}(r.a.Component);z.defaultProps={logoType:W.LETTERS,height:100};n(46);var Y=n(31),V=n.n(Y),X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).cache={},a.state={svgHovered:!1,positionsSelected:[]},a.handleSvgHover=a.handleSvgHover.bind(Object(u.a)(a)),a.handlePositionHover=a.handlePositionHover.bind(Object(u.a)(a)),a.handlePositionClicked=a.handlePositionClicked.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"handleSvgHover",value:function(e){this.setState({svgHovered:e})}},{key:"handlePositionHover",value:function(e,t,n){var a=this.props,r=a.onPositionMouseEnter,i=a.onPositionMouseLeave;n&&r?r(t,e.relatedTarget,this.getBars().barsGroupedByPosition.get(t)):!n&&i&&i(t,e.relatedTarget,this.getBars().barsGroupedByPosition.get(t)),this.setState({positionHovered:n?{position:t,element:e.relatedTarget,bars:this.getBars().barsGroupedByPosition.get(t)}:void 0})}},{key:"handlePositionClicked",value:function(e,t){var n=this.state.positionsSelected,a=this.props.onPositionSelectionChanged,r=n.some((function(e){return e.position===t}))?n.filter((function(e){return e.position!==t})):[].concat(Object(m.a)(n),[{position:t,element:e.relatedTarget,bars:this.getBars().barsGroupedByPosition.get(t)}]);a&&a(r),this.setState({positionsSelected:r})}},{key:"normalizeBarHeights",value:function(e){var t=this.props.alignment,a=e.map((function(e){return e.height})),r=Math.min.apply(Math,Object(m.a)(a)),i=Math.max.apply(Math,Object(m.a)(a));return e.map((function(e){var a=r,o=e.dataSeries.plotOptions&&e.dataSeries.plotOptions.fixYMax?e.dataSeries.plotOptions.fixYMax(t):i;return Object(s.a)({},e,{normalizedHeight:(e.height-a)/(o-a)*n.POSITION_VIEWBOX_HEIGHT})}))}},{key:"getBars",value:function(){var e=this,t=this.props,n=t.alignment,a=t.dataSeries;if(!this.cache.bars||n!==this.cache.alignment||a!==this.cache.dataSeries){this.cache.alignment=n,this.cache.dataSeries=a;var r=n.getMaxSequenceLength(),i=[];a.forEach((function(e){for(var t=0;t<r;t++)i.push(Object(s.a)({},e.getPositionalInfo(t,n),{position:t,dataSeries:e,normalizedHeight:-1}))})),this.cache.bars=Object.entries(V.a.groupBy(i,(function(e){return e.dataSeries.id}))).map((function(t){var n=Object(f.a)(t,2),a=(n[0],n[1]);return e.normalizeBarHeights(a)})).flat(),this.cache.barsGroupedByPosition=p(this.cache.bars,(function(e){return e.position})),this.cache.barsGroupedByDataseries=p(this.cache.bars,(function(e){return e.dataSeries}))}return{bars:this.cache.bars,barsGroupedByPosition:this.cache.barsGroupedByPosition,barsGroupedByDataseries:this.cache.barsGroupedByDataseries}}},{key:"renderTooltip",value:function(){var e=this.getBars();return r.a.createElement(U.a,{id:"getBarTooltip",effect:"solid",type:"light",border:!0,getContent:function(t){var n=parseInt(t),a=e.barsGroupedByPosition.get(n),i=n+1;return a?r.a.createElement("div",{className:"bar-position-textblock"},r.a.createElement("h1",null,"Position: ",i),a.map((function(e){return r.a.createElement("div",{className:"dataseries-line ".concat(e.dataSeries.cssClass),key:e.dataSeries.id},r.a.createElement("span",{className:"legend-square"}),r.a.createElement("span",{className:"legend-text"},e.dataSeries.name,": ",+e.height.toFixed(1)))}))):void 0}})}},{key:"renderBarPlot",value:function(){var e=this,t=this.props,a=t.alignment,i=t.positionWidth,o=t.height,s=a.getMaxSequenceLength(),l=i*s,c=this.getBars();return r.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(s*n.POSITION_VIEWBOX_WIDTH," ").concat(n.POSITION_VIEWBOX_HEIGHT),style:{width:l,height:o},xmlns:"http://www.w3.org/2000/svg",onMouseEnter:function(){return e.handleSvgHover(!0)},onMouseLeave:function(){return e.handleSvgHover(!1)}},Array.from(c.barsGroupedByPosition.entries()).map((function(t){var a=Object(f.a)(t,2),i=a[0],o=a[1],s=Math.max.apply(Math,Object(m.a)(o.map((function(e){return e.normalizedHeight})))),l=c.barsGroupedByDataseries.size,u=(1===l?.9:1/l)*n.POSITION_VIEWBOX_WIDTH,d=(1===l?i+.05:i)*n.POSITION_VIEWBOX_WIDTH;return r.a.createElement("g",{transform:"translate(".concat(d,",0)"),className:e.state.positionsSelected.some((function(e){return e.position===i}))?"position-container selected":"position-container",onClick:function(t){e.handlePositionClicked(t,i)},onMouseEnter:function(t){e.handlePositionHover(t,i,!0)},onMouseLeave:function(t){e.handlePositionHover(t,i,!1)},"data-for":"getBarTooltip","data-tip":i,"data-class":"barplot-tooltip-container",key:"pos_".concat(i)},o.map((function(e,t){return r.a.createElement("rect",{className:e.dataSeries.cssClass,transform:"translate(".concat(1*t/o.length*n.POSITION_VIEWBOX_WIDTH,",").concat(n.POSITION_VIEWBOX_HEIGHT-e.normalizedHeight,")"),width:u,height:e.normalizedHeight,key:"".concat(e.position,"_").concat(e.dataSeries.id)})})),r.a.createElement("rect",{className:"interaction-placeholder",transform:"translate(0,".concat(n.POSITION_VIEWBOX_HEIGHT-s,")"),width:n.POSITION_VIEWBOX_WIDTH,height:s}))})))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.alignment,a=t.dataSeries,r=t.positionWidth,i=t.height;return!this.cache||n!==e.alignment||a!==e.dataSeries||r!==e.positionWidth||i!==e.height}},{key:"componentDidUpdate",value:function(){U.a.rebuild()}},{key:"render",value:function(){var e=this.state.svgHovered?"barplot hovered":"barplot";return this.props.alignment?r.a.createElement("div",{className:e},this.renderTooltip(),this.renderBarPlot()):null}}]),n}(r.a.Component);X.POSITION_VIEWBOX_HEIGHT=100,X.POSITION_VIEWBOX_WIDTH=1,X.defaultProps={height:100},X.SHANNON_ENTROPY_BARPLOT={id:"entropy",name:"Entropy",cssClass:"barplot-shannon-entropy",plotOptions:{fixYMax:function(e){var t=e.getAllUpperAlphaLettersInAlignmentSorted(),n=1/t.length;return-1*t.reduce((function(e){return e+n*Math.log2(n)}),0)}},getPositionalInfo:function(e,t){var n=t.getPositionalLetterCounts(!0,t.getAllUpperAlphaLettersInAlignmentSorted()).get(e);return{height:n&&0!==Object.keys(n).length?-1*Object.values(n).reduce((function(e,t){return e+t*Math.log2(t)}),0):0}}},X.KULLBAC_LEIBLER_DIVERGENCE_BARPLOT={id:"kullback-leibler-divergence",name:"KL Divergence",cssClass:"barplot-kullback-leibler-divergence",getPositionalInfo:function(e,t){var n=t.getAllUpperAlphaLettersInAlignmentSorted(),a=t.getPositionalLetterCounts(!0,n).get(e),r=t.getGlobalAlphaLetterCounts(!0,n);return{height:a&&0!==Object.keys(a).length?n.reduce((function(e,t){return t in a&&(e+=a[t]*Math.log(a[t]/r[t])),e}),0):0}}},X.GAPS_BARPLOT={id:"gaps",name:"Gaps",cssClass:"barplot-gaps",plotOptions:{fixYMax:function(e){return e.getSequences().length}},getPositionalInfo:function(e,t){return{height:t.getGapCountAtColumn(e)}}};var K=n(3),Q=n(16),Z=n(33),J=Object(Q.PixiComponent)("AlignmentHighlighter",{create:function(e){return new K.Graphics},applyProps:function(e,t,n){var a=n.x,r=n.y,i=n.width,o=n.height,s=n.fillColor,l=n.fillAlpha;e.clear(),e.beginFill(s,l),e.drawRect(a,r,i,o),e.endFill()}}),$=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).app=void 0,e.scaleX=1,e.scaleY=1,e.renderAlignmentHighlighter=function(e){return r.a.createElement(J,Object(s.a)({fillColor:16711680,fillAlpha:.25},e))},e.onMouseEnter=function(e){document.body.style.overflow="hidden"},e.onMouseLeave=function(e){document.body.style.overflow="auto"},e.onWheel=function(e){},e}return Object(c.a)(n,[{key:"sliderChanged",value:function(e,t){this.app&&this.app.stage.children.forEach((function(n){"x"===t?n.scale.x=e:n.scale.y=e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.alignment,a=t.alignmentType,i=t.colorScheme,o=t.highlightRows,s=t.id,l=t.positionsToStyle,c=t.sortBy,u=t.stageResolution,d=t.viewportProps;if(!n)return null;var h=n.getSequences().length,f=n.getMaxSequenceLength();K.utils.skipHello(),K.settings.SCALE_MODE=K.SCALE_MODES.NEAREST;var m=o?o[1]-o[0]:void 0;return r.a.createElement("div",{id:s,onWheel:this.onWheel,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},r.a.createElement(Q.Stage,{width:null===u||void 0===u?void 0:u.width,height:null===u||void 0===u?void 0:u.height,options:{transparent:!0}},r.a.createElement(Q.AppContext.Consumer,null,(function(t){return e.app=t,r.a.createElement(r.a.Fragment,null)})),r.a.createElement(Q.AppContext.Consumer,null,(function(t){return r.a.createElement(te,Object.assign({app:t,numColumns:f,numRows:h,mouseDown:e.props.mouseDown},d),r.a.createElement(ee,{id:"tiled-alignment",alignment:n,alignmentType:a,sortBy:c,colorScheme:i,positionsToStyle:l}),m?r.a.createElement(r.a.Fragment,null,e.renderAlignmentHighlighter({x:0,y:e.props.highlightRows[0],width:f,height:m})):r.a.createElement(r.a.Fragment,null))}))))}}]),n}(r.a.Component);$.defaultProps={mouseDown:function(){},stageResolution:{width:485,height:650},viewportProps:{useDrag:!0,usePinch:!0,useWheel:!0,zoomPercent:0}};var ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.alignment!==this.props.alignment||e.colorScheme!==this.props.colorScheme||e.positionsToStyle!==this.props.positionsToStyle||e.sortBy!==this.props.sortBy}},{key:"render",value:function(){if(!this.props.alignment)return null;for(var e=this.props,t=e.alignment,n=e.alignmentType,a=e.colorScheme,i=e.positionsToStyle,o=e.sortBy,s=t.getSequences(o),l=t.getMaxSequenceLength(),c=s.length,u={fullWidth:l,fullHeight:c,targetTileWidth:Math.min(400,l),targetTileHeight:Math.min(400,c)},d=this.initializeTiledImages(u),h=0;h<d.numYTiles;h++)for(var f=0;f<d.numXTiles;f++){var m=this.generateCanvasForTile(f,h,u.targetTileWidth,u.targetTileHeight,d,s);d.tiles.push(m)}return r.a.createElement(r.a.Fragment,null,d.tiles.map((function(e){return r.a.createElement(Q.Sprite,{source:e.image,x:e.pixelX,y:e.pixelY,key:"".concat(e.tileX,"_\n                  ").concat(e.tileY,"_\n                  ").concat(a.commonName,"_\n                  ").concat(i.key,"_\n                  ").concat(n.key,"_\n                  ").concat(o.key,"_\n                  ").concat(t.getName())})})))}},{key:"colorCanvasWithSequence",value:function(e,t,n,a,r){for(var i=0,o=0;o<n.height;o++)for(var s=a[o+r.seqY],l=0;l<n.width;l++){var c=s.sequence[l+r.letterX],u=this.getCurrentMoleculeColors(c,l,r);e.data[i]=u.rgb.red,e.data[i+1]=u.rgb.green,e.data[i+2]=u.rgb.blue,e.data[i+3]=255,i+=4}t.putImageData(e,0,0)}},{key:"generateCanvasForTile",value:function(e,t,n,a,r,i){var o=document.createElement("canvas");o.height=t===r.numYTiles-1?r.lastTileHeight:a,o.width=e===r.numXTiles-1?r.lastTileWidth:n;var s={seqY:t*a,letterX:e*n},l=o.getContext("2d");null===l||void 0===l||l.fillRect(0,0,o.width,o.height);var c=null===l||void 0===l?void 0:l.getImageData(0,0,o.width,o.height);return c&&l&&this.colorCanvasWithSequence(c,l,o,i,s),{tileX:e,tileY:t,pixelX:s.letterX,pixelY:s.seqY,width:o.width,height:o.height,image:o}}},{key:"getCurrentMoleculeColors",value:function(e,t,n){var a=this.props,r=a.alignment,i=a.alignmentType,o=a.colorScheme,s=r.getConsensus(),l=r.getTargetSequence().sequence,c=i===O.AMINOACID?x:B,u=c.UNKNOWN;if(this.props.positionsToStyle===T.ALL)u=c.fromSingleLetterCode(e);else{var d=s[t+n.letterX].letter===e,h=l[t+n.letterX]===e;(this.props.positionsToStyle===T.CONSENSUS&&d||this.props.positionsToStyle===T.CONSENSUS_DIFF&&!d||this.props.positionsToStyle===T.QUERY&&h||this.props.positionsToStyle===T.QUERY_DIFF&&!h)&&(u=c.fromSingleLetterCode(e))}return u.colors[o.commonName]}},{key:"initializeTiledImages",value:function(e){var t=e.targetTileWidth,n=void 0===t?0:t,a=e.targetTileHeight,r=void 0===a?0:a,i=e.fullWidth,o=void 0===i?0:i,s=e.fullHeight,l=void 0===s?0:s;return{targetTileWidth:n,targetTileHeight:r,lastTileWidth:o%n!==0?o%n:n,lastTileHeight:l%r!==0?l%r:r,numXTiles:o%n!==0?Math.floor(o/n)+1:Math.floor(o/n),numYTiles:l%r!==0?Math.floor(l/r)+1:Math.floor(l/r),tiles:[]}}}]),n}(r.a.Component),te=Object(Q.PixiComponent)("PixiViewport",{create:function(e){var t=e.app,n=e.numColumns,a=e.numRows,r=e.useDrag,i=e.usePinch,o=e.useWheel,s=e.zoomPercent;t.renderer.backgroundColor=16777215;var l=new Z.a({screenWidth:t.renderer.width,screenHeight:t.renderer.height,worldWidth:n,worldHeight:a,interaction:t.renderer.plugins.interaction}).decelerate().clamp({direction:"all"}).bounce({friction:.1,time:150,underflow:"center"}).clampZoom({maxHeight:t.renderer.height,maxWidth:t.renderer.width});return r&&(l=l.drag({direction:"all"})),i&&(l=l.pinch()),o&&(l=l.wheel()),s&&(l=l.zoomPercent(s)),l.on("clicked",(function(t){e.mouseDown&&e.mouseDown(t.world.x,t.world.y)})),l},applyProps:function(e,t,n){return t.numColumns===n.numColumns&&t.numRows===n.numRows||(e.screenWidth=n.app.renderer.width,e.screenHeight=n.app.renderer.height,e.worldWidth=n.numColumns,e.worldHeight=n.numRows,e=(e=e.fitWorld(!0)).setZoom(n.app.renderer.width/n.numColumns,!1)),e}}),ne=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).renderCanvasComponent=function(){var e=r.props,t=e.alignment,n=e.highlightRows,i=e.sortBy,o=e.style,s=r.state.zoomPercent,l=r.getSizing();return a.createElement("div",null,a.createElement($,{id:"alignment_canvas",alignment:t,alignmentType:o.alignmentType,positionsToStyle:o.positionsToStyle,colorScheme:o.colorScheme,sortBy:i,stageResolution:{width:l.frameWidth,height:l.frameHeight},highlightRows:n,viewportProps:{useDrag:!0,usePinch:!0,useWheel:!0,zoomPercent:s},mouseDown:r.onMouseDown}))},r.onMouseDown=function(e,t){var n=r.props.onClick;n&&n(e,t)},r.state={zoomPercent:1},r}return Object(c.a)(n,[{key:"getSizing",value:function(){return{borderWidth:1,margin:2,frameHeight:this.props.height-4-1,frameWidth:this.props.width-4-1}}},{key:"render",value:function(){var e=this.props.alignHorizontal,t=this.getSizing();return a.createElement("div",{style:Object(s.a)({zIndex:1e5},"left"===e?{left:0}:{right:0},{top:0,bottom:0,height:t.frameHeight,width:t.frameWidth,position:"fixed",backgroundColor:"white",borderColor:"#333333",borderStyle:"solid",borderWidth:"".concat(t.borderWidth,"px"),margin:"".concat(t.margin,"px")})},this.renderCanvasComponent())}}]),n}(a.Component);ne.defaultProps={alignHorizontal:"right",height:600,width:300};var ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).editor=void 0,e.lastText=void 0,e.lastMode=void 0,e.element=void 0,e.lastElementWidth=void 0,e.lastElementHeight=void 0,e}return Object(c.a)(n,[{key:"getText",value:function(){if(this.props.text)return this.props.text;throw Error("Internal error: 'text' attribute must be provided or subclasses must implement getText()")}},{key:"getEditorMode",value:function(){return this.props.editorMode}},{key:"setupEditorAndEventListeners",value:function(e){this.editor=v.a.edit(e),this.editor.setShowPrintMargin(!1),this.editor.setReadOnly(!0),this.editor.setHighlightActiveLine(!1),this.editor.setHighlightGutterLine(!1),this.editor.setFontSize(this.props.fontSize+"px"),this.editor.renderer.setShowGutter(!1),this.editor.renderer.setPadding(0),this.editor.renderer.$cursorLayer.element.style.display="none"}},{key:"addMouseEventListeners",value:function(){var e=this;if(!this.editor)throw Error("Editor must be defined before adding mouse listeners.");function t(e,t){var n=t.getDocumentPosition(),a=e.renderer.textToScreenCoordinates(n.row,n.column);return{mouseRow:n.row,mouseColumn:n.column,mousePageX:a.pageX,mousePageY:a.pageY}}return this.editor.on("mousemove",(function(n){e.props.mouseMove&&e.props.mouseMove(t(e.editor,n))})),this.editor.on("mousedown",(function(n){e.props.mouseDown&&e.props.mouseDown(t(e.editor,n))})),this.editor}},{key:"setText",value:function(){if(!this.editor)throw Error("Editor must be defined to call setText()");if(this.props.fontSize+"px"!==this.editor.getFontSize()&&(this.editor.setFontSize(this.props.fontSize+"px"),this.props.characterSizeChanged&&this.editor.renderer.characterWidth&&this.props.characterSizeChanged(this.editor.renderer.characterWidth)),this.lastMode!==this.getEditorMode()){var e=this.getEditorMode();this.editor.session.setMode(e),this.lastMode=e}if(!this.lastText||this.lastText!==this.getText()){this.editor.selectAll(),this.editor.removeLines();var t=this.getText();this.editor.insert(t),this.lastText=t}}},{key:"initialLoad",value:function(e){e&&!this.editor&&(this.element=e,this.lastElementWidth=e.clientWidth,this.lastElementHeight=e.clientHeight,this.setupEditorAndEventListeners(e),this.addMouseEventListeners(),this.setText(),this.props.editorLoaded&&this.props.editorLoaded(this.editor,e))}},{key:"componentDidUpdate",value:function(){if(!this.editor||!this.element)throw Error("internal error - componentDidUpdate called before editor initialized");return this.setText(),this.element.clientWidth===this.lastElementWidth&&this.element.clientHeight===this.lastElementHeight||(this.lastElementWidth=this.element.clientWidth,this.lastElementHeight=this.element.clientHeight,this.editor.resize()),!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.classNames,onMouseEnter:function(){e.props.mouseEnter&&e.props.mouseEnter()},onMouseLeave:function(){e.props.mouseLeave&&e.props.mouseLeave()}},r.a.createElement("div",{id:this.props.id,ref:function(t){return e.initialLoad(t)}}))}}]),n}(r.a.Component);ae.defaultProps={fontSize:14};var re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getText",value:function(){return this.props.alignment.getSequences(this.props.sortBy).map((function(e){return e.sequence})).join("\n")}},{key:"getEditorMode",value:function(){return this.props.alignment.getAceEditorMode()}}]),n}(ae);re.defaultProps={sortBy:q.INPUT,fontSize:14};var ie=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getText",value:function(){return this.props.alignment.getConsensus().map((function(e){return e.letter})).join("")}}]),n}(re),oe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getText",value:function(){return this.props.alignment.getTargetSequence().sequence}}]),n}(re),se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getText",value:function(){return n.generateTextualRuler(this.props.alignment.getMaxSequenceLength())}},{key:"getEditorMode",value:function(){}}],[{key:"generateTextualRuler",value:function(e){for(var t="",n=1;n<=e+1;n++){var a=n%10===0;if(t+=a?"|":!a&&n%5===0?":":".",a){var r=""+n,i=t.length-r.length-1;i<0||(t=t.substr(0,i)+r+"|")}}return t}}]),n}(ae),le={logoPlotStyle:W.LETTERS,zoomLevel:13,sortBy:q.INPUT,showMiniMap:!1,showAnnotations:!0,showConsensus:!0,showQuery:!0,showRuler:!0,showLogo:!0,barplotDataseries:[X.SHANNON_ENTROPY_BARPLOT,X.GAPS_BARPLOT]},ce=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).verticalScrollSync=void 0,a.horizontalScrollSync=void 0,a.handleCharacterSizeChanged=function(e){a.state.aceCharacterWidth!==e&&a.setState({aceCharacterWidth:e})},a.aceEditorLoaded=function(e,t,n,r){r!==R.horizontal&&r!==R.both||a.horizontalScrollSync.registerAceScroller(t,n),r!==R.vertical&&r!==R.both||a.verticalScrollSync.registerAceScroller(t,n),a.setState({aceCharacterWidth:t.renderer.characterWidth,aceEditors:[t].concat(a.state.aceEditors)}),"ace-alignment"===e&&t.renderer.on("afterRender",(function(){setTimeout((function(){a.setState({alignmentEditorVisibleFirstRow:t.renderer.getFirstFullyVisibleRow(),alignmentEditorVisibleLastRow:t.renderer.getLastFullyVisibleRow()})}))}))},a.windowDimensionsUpdated=function(){a.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})},a.renderSequenceLogo=function(){var e=a.props,t=e.alignment,n=e.logoPlotStyle,i=e.style;return r.a.createElement("div",{className:"".concat(i.alignmentType.className," ")+"".concat(i.colorScheme.className," ")+"".concat(T.ALL.className)},r.a.createElement(z,{alignment:t,glyphWidth:a.state.aceCharacterWidth,logoType:n,alignmentType:i.alignmentType}))},a.renderConservationBox=function(){var e=a.props.barplotDataseries;return!e||e.length<1?null:r.a.createElement(X,{alignment:a.props.alignment,dataSeries:e,positionWidth:a.state.aceCharacterWidth})},a.renderConsensusQueryBox=function(){return r.a.createElement("div",{className:"consensusseq_box"},r.a.createElement(ie,{id:"ace-consensusseq",alignment:a.props.alignment,fontSize:a.props.zoomLevel,classNames:[a.props.style.residueDetail.className,a.props.style.alignmentType.className,a.props.style.positionsToStyle.className,a.props.style.colorScheme.className].join(" "),editorLoaded:function(e,t){a.aceEditorLoaded("ace-consensusseq",e,t,R.horizontal)}}))},a.renderQuerySeqBox=function(){return r.a.createElement("div",{className:"queryseq_box"},r.a.createElement(oe,{id:"ace-queryseq",alignment:a.props.alignment,fontSize:a.props.zoomLevel,sortBy:a.props.sortBy,classNames:[a.props.style.residueDetail.className,a.props.style.alignmentType.className,a.props.style.positionsToStyle.className,a.props.style.colorScheme.className].join(" "),editorLoaded:function(e,t){a.aceEditorLoaded("ace-queryseq",e,t,R.horizontal)}}))},a.renderPositionBox=function(){return r.a.createElement("div",{className:"position_box"},r.a.createElement(se,{id:"ace-positions",alignment:a.props.alignment,fontSize:a.props.zoomLevel,editorLoaded:function(e,t){a.aceEditorLoaded("ace-positions",e,t,R.horizontal)},mouseEnter:function(){},mouseLeave:function(){},mouseMove:function(e){},mouseDown:function(e){}}))},a.renderAlignmentBox=function(){return r.a.createElement("div",{className:"alignment_box"},r.a.createElement(re,{id:"ace-alignment",alignment:a.props.alignment,fontSize:a.props.zoomLevel,sortBy:a.props.sortBy,classNames:[a.props.style.residueDetail.className,a.props.style.alignmentType.className,a.props.style.positionsToStyle.className,a.props.style.colorScheme.className].join(" "),characterSizeChanged:a.handleCharacterSizeChanged,editorLoaded:function(e,t){a.aceEditorLoaded("ace-alignment",e,t,R.both)}}))},a.renderAlignmentAnnotationBox=function(){return r.a.createElement("div",{className:"alignment_metadata_box"},r.a.createElement(ae,{id:"ace-alignment-metadata",text:a.props.alignment.getSequences(a.props.sortBy).map((function(e){return e.id})).join("\n"),fontSize:a.props.zoomLevel,editorLoaded:function(e,t){a.aceEditorLoaded("ace-alignment-metadata",e,t,R.vertical)}}))},a.onMinimapClick=function(e,t){var n=a.state,r=n.aceEditors,i=n.alignmentEditorVisibleFirstRow,o=n.alignmentEditorVisibleLastRow,s=40;void 0!==i&&void 0!==o&&(s=o-i),r.length>=1&&r[0].scrollToRow(Math.floor(t-s/2))},a.state={aceEditors:[],aceCharacterWidth:0,windowWidth:window.innerWidth,windowHeight:window.innerHeight},a.verticalScrollSync=new F(R.vertical),a.horizontalScrollSync=new F(R.horizontal),a}return Object(c.a)(n,[{key:"generateWidget",value:function(e,t,n,a){var i=this;return r.a.createElement("div",{className:"av-widget ".concat(e)},r.a.createElement("div",{className:"av-annotation"},t),r.a.createElement("div",{className:"av-content",ref:function(e){e&&a&&i.horizontalScrollSync.registerElementScroller(e)}},n))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.windowDimensionsUpdated)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.windowDimensionsUpdated)}},{key:"render",value:function(){var e=this.props,t=e.alignment,n=e.barplotDataseries,a=e.showAnnotations,i=e.showConsensus,o=e.showLogo,s=e.showQuery,l=e.showRuler;if(!t)return null;var c=a?"":" annotation-closed";return r.a.createElement("div",{className:"alignment_viewer".concat(c)},this.renderMiniMap(),n?this.generateWidget("av-conservation-gaps",n.map((function(e){return e.name})).join(" / "),this.renderConservationBox(),!0):null,o?this.generateWidget("av-sequence-logo","Logo:",this.renderSequenceLogo(),!0):null,i?this.generateWidget("av-consensus-seq","Consensus sequence:",this.renderConsensusQueryBox()):null,s?this.generateWidget("av-target-seq","Query sequence:",this.renderQuerySeqBox()):null,l?this.generateWidget("av-position-indicator","Position:",this.renderPositionBox()):null,this.generateWidget("av-ace-msa",this.renderAlignmentAnnotationBox(),this.renderAlignmentBox()))}},{key:"renderMiniMap",value:function(){var e=this.props,t=e.alignment,n=e.sortBy,a=e.showMiniMap,i=e.style,o=this.state.windowHeight,s=Math.max(300,Math.min(450,t.getMaxSequenceLength())),l=a?"mini-map":"mini-map hidden";return t&&i&&r.a.createElement("div",{className:l},r.a.createElement(ne,{width:s,height:o,alignHorizontal:"right",alignment:t,style:i,sortBy:n,highlightRows:void 0!==this.state.alignmentEditorVisibleFirstRow&&void 0!==this.state.alignmentEditorVisibleLastRow?[this.state.alignmentEditorVisibleFirstRow,this.state.alignmentEditorVisibleLastRow]:void 0,onClick:this.onMinimapClick}))}}]),n}(r.a.Component);ce.defaultProps=le;var ue=n(25),de=n.n(ue),he=n(34),fe=(n(58),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"fromFileContents",value:function(e,t){for(var a=t.trim().split(">"),r=[],i=0;i<a.length;i++){var o=a[i].split(/\r?\n/);if(o.length>1){var s={id:o[0],sequence:o.slice(1).join("")};r.push(s)}}return new n(e,r)}}]),n}(G)),me=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e,a,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,a)).metadata=void 0,i.metadata=r,i}return Object(c.a)(n,[{key:"getMetadata",value:function(){return this.metadata}}],[{key:"fromFileContents",value:function(e,t){var a=t.trim().split(/\r?\n/);if(a.length<3||!1===a[0].startsWith("# STOCKHOLM 1.0")||"//"!==a[a.length-1])throw Error("'fileContents' do not appear to be stockholm format (header !== '# STOCKHOLM 1.0' or footer !== '//')");var r={GF:{},GS:{},GR:{},GC:{}},i=[];return a.slice(1,a.length-1).forEach((function(e,t){if((e=e.trim()).startsWith("#"))if(e.length<8||!1===["GF","GS","GR","GC"].includes(e.substr(2,2)))console.warn("Unexpected metadata line in Stockholm alignment: "+e);else{var n=e.substr(2,2),a=e.substr(5).trim().match(/^(\S+)\s(.*)/).slice(1);if(a[1]=a[1].trim(),"GF"===n)a[0]in r.GF===!1?r.GF[a[0]]=a[1]:r.GF[a[0]]+=" "+a[1];else if("GS"===n){var o=a[0],s=a[1].trim().match(/^(\S+)\s(.*)/).slice(1);o in r.GS===!1&&(r.GS[o]={}),s[0]in r.GS[o]===!1&&(r.GS[o][s[0]]=[]),r.GS[o][s[0]].push(s[1])}else if("GR"===n){var l=a[0],c=a[1].trim().match(/^(\S+)\s(.*)/).slice(1);l in r.GR===!1&&(r.GR[l]={}),r.GR[l][c[0]]=c[1]}else"GC"===n&&(r.GC[a[0]]=a[1])}else{var u=e.match(/^(\S+)\s(.*)/).slice(1);i.push({id:u[0].trim(),sequence:u[1].trim()})}})),console.log("metadata:",r),console.log("sequences:",i),new n(e,i,r)}}]),n}(G),ge=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).fileInput=void 0,r.handleFileUploadInputChange=r.handleFileUploadInputChange.bind(Object(u.a)(r)),r.handleClick=r.handleClick.bind(Object(u.a)(r)),r.fileInput=a.createRef(),r}return Object(c.a)(n,[{key:"handleClick",value:function(e){var t;e.preventDefault(),null===(t=this.fileInput.current)||void 0===t||t.click()}},{key:"readFileText",value:function(e){var t=this,n=this.props.onAlignmentLoaded,a=new FileReader;a.onload=function(r){var i,o=a.result;try{i=me.fromFileContents(e.name,o)}catch(r){i=fe.fromFileContents(e.name,o)}n(i),t.fileInput.current&&(t.fileInput.current.value="")},a.readAsText(e)}},{key:"handleFileUploadInputChange",value:function(e){var t=this,n=this.props.onFileLoadStart;e.preventDefault(),this.fileInput.current&&this.fileInput.current.files&&(n&&n(),setTimeout((function(){var e=t.fileInput.current.files[0];t.readFileText(e)})))}},{key:"renderFileUpload",value:function(){var e=this.props.fileSelectorLabelText;return a.createElement("label",null,a.createElement("strong",null,e),a.createElement("input",{type:"file",className:"hidden-file-input",ref:this.fileInput,onChange:this.handleFileUploadInputChange}),a.createElement("button",{type:"button",onClick:this.handleClick},"Choose File"))}},{key:"renderExampleFiles",value:function(){var e=this,t=this.props,n=t.exampleFiles,r=t.onFileLoadStart;return n?a.createElement("label",null,a.createElement("strong",null,"Example Alignments:"),n.map((function(t){return a.createElement("button",{type:"button",className:"button-link",key:t.fileURL,onClick:function(){var n=Object(he.a)(de.a.mark((function n(a){var i;return de.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r&&r(),n.t0=File,n.next=4,fetch("".concat(t.fileURL));case 4:return n.next=6,n.sent.blob();case 6:n.t1=n.sent,n.t2=[n.t1],n.t3=t.fileName,i=new n.t0(n.t2,n.t3),e.readFileText(i);case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},t.labelText)}))):null}},{key:"render",value:function(){return a.createElement("div",{className:"alignment-file-loader"},a.createElement("div",{className:"file-upload-input"},this.renderFileUpload()),a.createElement("div",{className:"example-files"},this.renderExampleFiles()))}}]),n}(a.Component);ge.defaultProps={fileSelectorLabelText:"Upload:"};var pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).renderSettingsBox=function(e){var t=a.state.alignment,n=t?r.a.createElement("div",null,r.a.createElement("h3",null,t.getName()),r.a.createElement("h4",null,"".concat(t.getSequences().length," sequences (rows) and ").concat(t.getMaxSequenceLength()," positions (columns) "))):r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"app-header"},r.a.createElement("div",{className:"settings-box"},r.a.createElement("form",null,r.a.createElement("div",{className:"settings-header"},r.a.createElement("button",{className:"button-link".concat(a.state.showSettings?" hide":""),type:"button",onClick:function(e){a.setState({showSettings:!0})}},"Expand"),r.a.createElement("button",{className:"button-link".concat(a.state.showSettings?"":" hide"),type:"button",onClick:function(e){a.setState({showSettings:!1})}},"Hide"),r.a.createElement("div",null,r.a.createElement("h2",null,"AlignmentViewer 2.0 Settings Demo"),n)),r.a.createElement("div",{style:{display:a.state.showSettings?"block":"none",position:"relative"}},a.renderAlignmentTypeLabel(e),a.renderSortControl(),a.renderColorScheme(e),a.renderResidueDetail(e),a.renderPositionStyling(e),a.renderSequenceLogo(),a.renderZoomButtons(),a.renderMiniMapToggle(),a.renderAnnotationToggle(),r.a.createElement("br",null),a.renderFileUpload(),r.a.createElement("div",{className:"loader".concat(a.state.loading?"":" hide")})))))},a.renderSortControl=function(){var e=a.state.sortBy;return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Sort order:"),r.a.createElement("select",{value:e.key,onChange:function(e){return a.setState({sortBy:q.fromKey(e.target.value)})}},q.list.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},a.renderAlignmentTypeLabel=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Alignment Type:"),r.a.createElement("select",{value:e.alignmentType.key,onChange:function(e){return a.setState({style:k.fromAlignmentType(O.fromKey(e.target.value))})}},O.list.map((function(e){return r.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},a.renderColorScheme=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Color Scheme:"),r.a.createElement("select",{value:e.alignmentType.allColorSchemes.indexOf(e.colorScheme),onChange:function(t){a.setState({style:Object(s.a)({},e,{colorScheme:e.alignmentType.allColorSchemes[parseInt(t.target.value)]})})}},e.alignmentType.allColorSchemes.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.description)})))))},a.renderResidueDetail=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Residue Style:"),r.a.createElement("select",{value:e.residueDetail.key,onChange:function(t){a.setState({style:Object(s.a)({},e,{residueDetail:w.fromKey(t.target.value)})})}},w.list.map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.description)})))))},a.renderPositionStyling=function(e){return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Positions to Style:"),r.a.createElement("select",{value:T.list.indexOf(e.positionsToStyle),onChange:function(t){a.setState({style:Object(s.a)({},e,{positionsToStyle:T.list[parseInt(t.target.value)]})})}},T.list.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.description)})))))},a.renderSequenceLogo=function(){var e=a.state.logoPlotStyle;return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Sequence Logo Style:"),r.a.createElement("select",{value:e,onChange:function(e){a.setState({logoPlotStyle:e.target.value})}},Object.values(W).map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))))},a.renderZoomButtons=function(){var e=a.state.zoomLevel;return r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement("strong",null,"Zoom Level:"),r.a.createElement("div",{className:"zoom-level"},r.a.createElement("button",{type:"button",disabled:e<3,onClick:function(t){a.setState({zoomLevel:e-1})}},"-"),e,r.a.createElement("button",{type:"button",disabled:e>15,onClick:function(t){a.setState({zoomLevel:e+1})}},"+"))))},a.renderFileUpload=function(){return r.a.createElement("div",null,r.a.createElement(ge,{fileSelectorLabelText:"Upload Alignment File:",exampleFiles:[{labelText:"\u03b2-lactamase",fileURL:"/AlignmentViewer2.0/7fa1c5691376beab198788a726917d48_b0.4.a2m",fileName:"7fa1c5691376beab198788a726917d48_b0.4.a2m"}],onFileLoadStart:function(){a.setState({loading:!0})},onAlignmentLoaded:a.onAlignmentReceived}))},a.renderMiniMapToggle=function(){return r.a.createElement("div",{className:"minimap-toggle"},r.a.createElement("label",null,r.a.createElement("strong",null,"Show MiniMap:"),r.a.createElement("input",{name:"showMiniMap",type:"checkbox",checked:a.state.showMiniMap,onChange:function(e){var t=e.target;a.setState({showMiniMap:t.checked})}})))},a.renderAnnotationToggle=function(){return r.a.createElement("div",{className:"annotation-toggle"},r.a.createElement("label",null,r.a.createElement("strong",null,"Show Annotations:"),r.a.createElement("input",{name:"showAnnotations",type:"checkbox",checked:a.state.showAnnotations,onChange:function(e){var t=e.target;a.setState({showAnnotations:t.checked})}})))},a.state={style:new A,logoPlotStyle:W.LETTERS,zoomLevel:14,sortBy:q.INPUT,showMiniMap:!1,showAnnotations:!0,showSettings:!0},a.onAlignmentReceived=a.onAlignmentReceived.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.alignment,n=e.logoPlotStyle,a=e.showAnnotations,i=e.showMiniMap,o=e.sortBy,s=e.style,l=e.zoomLevel,c=t?r.a.createElement("div",{className:"av-holder"},r.a.createElement(ce,{alignment:t,style:s,logoPlotStyle:n,zoomLevel:l,sortBy:o,showMiniMap:i,showAnnotations:a})):r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",null,this.renderSettingsBox(s),c)}},{key:"onAlignmentReceived",value:function(e){this.setState({alignment:e,showSettings:!1,style:e.getDefaultStyle(),loading:!1})}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports={acePrefix:"ace_",preAceQueryClass:"q",preAceConsensusClass:"c",aceQueryClass:"q",aceConsensusClass:"c",aceResidueParentClass:"ace_line",darkHueClass:"dark-residues",lightHueClass:"light-residues",lettersOnlyHueClass:"letters-only-residues",aaAlignTypeClass:"alignment-aa",ntAlignTypeClass:"alignment-nt",styPosAllClass:"alignment-positions-tostyle-all",styPosQueryClass:"alignment-positions-tostyle-query",styPosQueryDiffClass:"alignment-positions-tostyle-query-diff",styPosConsensusClass:"alignment-positions-tostyle-consensus",styPosConsensusDiffClass:"alignment-positions-tostyle-consensus-diff",aaStyClass_Default:"aa-alignment-style-default",aaStyDesc_Default:"Default",aaStyBGAlpha_Default:".25",aaStyColorOrder_Default:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V",aaStyColors_Default:"#3c0,#c00,#60c,#03f,#ff0,#60c,#03f,#3c0,#090,#3c0,#3c0,#c00,#3c0,#090,#3c0,#09f,#09f,#090,#090,#3c0",aaStyClass_Buried:"aa-alignment-style-buried",aaStyDesc_Buried:"Buried Index",aaStyBGAlpha_Buried:".25",aaStyColorOrder_Buried:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Buried:"#00a35c,#00fc03,#00eb14,#00eb14,blue,#00f10e,#00f10e,#009d62,#00d52a,#0054ab,#007b84,lime,#009768,#008778,#00e01f,#00d52a,#00db24,#00a857,#00e619,#005fa0,#00eb14,#00b649,#00f10e",aaStyClass_Cinema:"aa-alignment-style-cinema",aaStyDesc_Cinema:"Cinema",aaStyBGAlpha_Cinema:".25",aaStyColorOrder_Cinema:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Cinema:"#bbb,grey,#ff0,red,red,#f0f,brown,cyan,#bbb,#fff,cyan,#bbb,#bbb,green,#fff,brown,green,cyan,green,green,#fff,#bbb,#f0f,grey,#f0f,grey",aaStyClass_Clustal:"aa-alignment-style-clustal",aaStyDesc_Clustal:"Clustal",aaStyBGAlpha_Clustal:".25",aaStyColorOrder_Clustal:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Clustal:"orange,#fff,green,red,red,blue,orange,red,green,#fff,red,green,green,#fff,#fff,orange,#fff,red,orange,orange,#fff,green,blue,#fff,blue,#fff",aaStyClass_Clustal2:"aa-alignment-style-clustal2",aaStyDesc_Clustal2:"Clustal2",aaStyBGAlpha_Clustal2:".25",aaStyColorOrder_Clustal2:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Clustal2:"#80a0f0,#f01505,lime,#c048c0,#f08080,lime,#c048c0,#f09048,#15a4a4,#80a0f0,#80a0f0,#f01505,#80a0f0,#80a0f0,#ff0,lime,lime,#80a0f0,#15a4a4,#80a0f0,#fff,#fff,#fff",aaStyClass_Helix:"aa-alignment-style-helix",aaStyDesc_Helix:"Helix Propensity",aaStyBGAlpha_Helix:".25",aaStyColorOrder_Helix:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Helix:"#e718e7,#6f906f,#1be41b,#787,#23dc23,#926d92,#f0f,lime,#758a75,#8a758a,#ae51ae,#a05fa0,#ef10ef,#986798,lime,#36c936,#47b847,#8a758a,#21de21,#857a85,#49b649,#758a75,#c936c9",aaStyClass_Hydrophobicity:"aa-alignment-style-hydrophobicity",aaStyDesc_Hydrophobicity:"Hydrophobicity",aaStyBGAlpha_Hydrophobicity:".25",aaStyColorOrder_Hydrophobicity:"F,I,W,L,V,M,Y,C,A,T,H,G,S,Q,R,K,N,E,P,D",aaStyColors_Hydrophobicity:"red,red,#ff0606,#ff0606,#ff4c4c,#ff5252,#f77,#ffa5a5,#ffc0c0,#e1e1ff,#d0d0ff,#b6b6ff,#a5a5ff,#9595ff,#8787ff,#6969ff,#5959ff,#4f4fff,#1d1dff,blue",aaStyClass_Lesk:"aa-alignment-style-lesk",aaStyDesc_Lesk:"Lesk",aaStyBGAlpha_Lesk:".25",aaStyColorOrder_Lesk:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Lesk:"orange,#fff,green,red,red,green,orange,#f0f,green,#fff,red,green,green,#f0f,#fff,green,#f0f,red,orange,orange,#fff,green,green,#fff,green,#fff",aaStyClass_MAE:"aa-alignment-style-mae",aaStyDesc_MAE:"MAE",aaStyBGAlpha_MAE:".25",aaStyColorOrder_MAE:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_MAE:"#7d8,#fff,#9e6,#5b3,#5b3,#99f,#7d8,#55f,#6bf,#fff,#fc7,#6bf,#6bf,#5b3,#fff,#eaa,#5b3,#fc7,#f45,#f45,#fff,#6bf,#99f,#fff,#99f,#fff",aaStyClass_Strand:"aa-alignment-style-strand",aaStyDesc_Strand:"Strand Propensity",aaStyBGAlpha_Strand:".25",aaStyColorOrder_Strand:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Strand:"#5858a7,#6b6b94,#64649b,#2121de,#9d9d62,#8c8c73,blue,#4949b6,#60609f,#ecec13,#b2b24d,#4747b8,#82827d,#c2c23d,#2323dc,#4949b6,#9d9d62,#c0c03f,#d3d32c,#ff0,#4343bc,#797986,#4747b8",aaStyClass_Taylor:"aa-alignment-style-taylor",aaStyDesc_Taylor:"Taylor",aaStyBGAlpha_Taylor:".25",aaStyColorOrder_Taylor:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Taylor:"#cf0,blue,#c0f,red,#ff0,#f0c,#f06,#f90,#06f,#6f0,#3f0,#60f,lime,#0f6,#fc0,#f30,#f60,#0cf,#0fc,#9f0,#fff,#fff,#fff",aaStyClass_Turn:"aa-alignment-style-turn",aaStyDesc_Turn:"Turn Propensity",aaStyBGAlpha_Turn:".25",aaStyColorOrder_Turn:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Turn:"#2cd3d3,#708f8f,red,#e81717,#a85757,#3fc0c0,#788,red,#708f8f,cyan,#1ce3e3,#7e8181,#1ee1e1,#1ee1e1,#f60909,#e11e1e,#738c8c,#738c8c,#9d6262,#07f8f8,#f30c0c,#7c8383,#5ba4a4",aaStyClass_Zappo:"aa-alignment-style-zappo",aaStyDesc_Zappo:"Zappo",aaStyBGAlpha_Zappo:".25",aaStyColorOrder_Zappo:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Zappo:"#ffafaf,#6464ff,lime,red,#ff0,lime,red,#f0f,#6464ff,#ffafaf,#ffafaf,#6464ff,#ffafaf,#ffc800,#f0f,lime,lime,#ffc800,#ffc800,#ffafaf,#fff,#fff,#fff",ntStyClass_Default:"nt-alignment-style-default",ntStyDesc_Default:"Default",ntStyBGAlpha_Default:".25",ntStyColorOrder_Default:"A,C,G,T,U,R,Y",ntStyColors_Default:"#5050ff,#e00000,#00c000,#e6e600,#c90,#2e8b57,#ff8c00",ntStyClass_Nucleotide:"nt-alignment-style-nucleotide",ntStyDesc_Nucleotide:"Nucleotide",ntStyBGAlpha_Nucleotide:".25",ntStyColorOrder_Nucleotide:"A,C,G,T,U",ntStyColors_Nucleotide:"#64f73f,#ffb340,#eb413c,#3c88ee,#3c88ee",ntStyClass_Purine:"nt-alignment-style-purine",ntStyDesc_Purine:"Purine/Pyrimidine",ntStyBGAlpha_Purine:".25",ntStyColorOrder_Purine:"A,C,G,R,T,U,Y",ntStyColors_Purine:"#ff83fa,#40e0d0,#ff83fa,#ff83fa,#40e0d0,#40e0d0,#40e0d0"}}},[[35,1,2]]]);
//# sourceMappingURL=main.471e4ba2.chunk.js.map