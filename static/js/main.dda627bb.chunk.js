(this.webpackJsonpalignmentviewer2=this.webpackJsonpalignmentviewer2||[]).push([[0],{29:function(e,t,n){e.exports=n(48)},34:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o),i=n(25),s=n.n(i),l=(n(34),n(18)),c=n.n(l),u=n(10),h=n(2),d=n(3),p=n(5),m=n(4),f=n(6),g=(n(36),n(9));!function(e){e[e.hamming=0]="hamming"}(r||(r={}));var y=function(){function e(t,n,r,o){Object(h.a)(this,e),this.key=t,this.description=n,this.isTargetSequenceDependent=r,this.distanceFn=o}return Object(d.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();y.INPUT=new y("as-input","As input",!1),y.HAMMING_DIST_TARGET=new y("hamming-dist-to-target","Hamming distance to target sequence",!0,r.hamming),y.list=[y.INPUT,y.HAMMING_DIST_TARGET];var L,v=function(){function e(t,n){var r=this;Object(h.a)(this,e),this.name=void 0,this.sequences=void 0,this.targetSequence=void 0,this.positionalLetterCounts=new Map,this.globalAlphaLetterCounts={},this.allAlphaLettersSorted=void 0,this.consensus=[],this.name=t,this.sequences=new Map,this.sequences.set(y.INPUT,n),this.targetSequence=n[0];for(var o=new Date,a={},i=0;i<n.length;i++)for(var s=n[i].sequence,l=0;l<s.length;l++){var c=s[l].toUpperCase(),u=!!c.match(/[a-z]/i),d=l;a[c]=1;var p=this.positionalLetterCounts.get(d);p||(p={},this.positionalLetterCounts.set(d,p)),c in p===!1&&(p[c]=0),p[c]+=1,u&&(c in this.globalAlphaLetterCounts===!1&&(this.globalAlphaLetterCounts[c]=0),this.globalAlphaLetterCounts[c]+=1)}this.allAlphaLettersSorted=Object.keys(a).sort().reduce((function(e,t){return t.match(/[a-z]/i)&&e.push(t),e}),[]),this.consensus=Array.from(this.positionalLetterCounts).map((function(e){var t=Object(g.a)(e,2),n=t[0],o=t[1],a=r.allAlphaLettersSorted.reduce((function(e,t){return e in o===!1||o[e]<o[t]?t:e}));return{position:n,letter:a,occurrences:o[a]}})),console.log("done parsing alignment. took "+((new Date).getTime()-o.getTime())+"ms")}return Object(d.a)(e,null,[{key:"fromFileContents",value:function(t,n){for(var r=n.split(">"),o=[],a=0;a<r.length;a++){var i=r[a].split(/\r?\n/);if(i.length>1){var s={id:i[0],sequence:i.slice(1).join("")};o.push(s)}}return new e(t,o)}},{key:"getSequenceDistance",value:function(e,t,n){var o=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length,a=0;if(n===r.hamming){for(var i=0;i<o;i++)e.sequence[i]!==t.sequence[i]&&(a+=1);return a}throw Error("Unable to determine sequence distance with distance function "+n)}},{key:"normalizeLetterCounts",value:function(e,t){var n=Object.keys(e).reduce((function(n,r){return t&&!t.includes(r)||(n+=e[r]),n}),0);return Object.keys(e).reduce((function(r,o){return t&&!t.includes(o)||(r[o]=e[o]/n),r}),{})}}]),Object(d.a)(e,[{key:"getName",value:function(){return this.name}},{key:"getConsensus",value:function(){return this.consensus}},{key:"getGapsPerColumn",value:function(){return Array.from(this.positionalLetterCounts).map((function(e){var t=Object(g.a)(e,2),n=(t[0],t[1]);return isNaN(n["-"])?0:n["-"]}))}},{key:"getGlobalAlphaLetterCounts",value:function(t,n){return t?e.normalizeLetterCounts(this.globalAlphaLetterCounts,n):this.globalAlphaLetterCounts}},{key:"getMaxSequenceLength",value:function(){return this.getSequences().reduce((function(e,t){return t.sequence.length>e&&(e=t.sequence.length),e}),-1)}},{key:"getPositionalLetterCounts",value:function(t,n){return t?Array.from(this.positionalLetterCounts).reduce((function(t,r){var o=Object(g.a)(r,2),a=o[0],i=o[1];return t.set(a,e.normalizeLetterCounts(i,n)),t}),new Map):this.positionalLetterCounts}},{key:"getSequences",value:function(e,t){if(e=e||y.INPUT,t=t||!1,!this.sequences.has(e)||t)switch(e){case y.INPUT:break;case y.HAMMING_DIST_TARGET:this.sequences.set(e,this.sortByDistanceToTargetSequence(y.HAMMING_DIST_TARGET.distanceFn));break;default:throw Error('The sortBy option provided "'.concat(e,'" is not implemented'))}return this.sequences.get(e)}},{key:"getSortedAlphaLetters",value:function(){return this.allAlphaLettersSorted}},{key:"getTargetSequence",value:function(){return this.targetSequence}},{key:"setTargetSequence",value:function(e){var t=this;if(void 0===this.getSequences().find((function(t){return t===e})))throw Error("target sequence does not exist in alignment");this.targetSequence=e,this.sequences.forEach((function(e,n){t.getSequences(n,!0)}))}},{key:"sortByDistanceToTargetSequence",value:function(t){var n=this,o=this.getSequences();switch(t){case r.hamming:return o.map((function(e){return e})).sort((function(t,o){return e.getSequenceDistance(n.targetSequence,t,r.hamming)-e.getSequenceDistance(n.targetSequence,o,r.hamming)}));default:throw Error('The distFn option provided "'.concat(t,'" is not implemented'))}}}]),e}();n(37);!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.both=2]="both"}(L||(L={}));var S=function(){function e(){Object(h.a)(this,e),this._groupScrollpropsHM={},this._blockNextScrollEvent=new Map}return Object(d.a)(e,[{key:"_getAceMaxScrollWidth",value:function(e){return"renderer"in e?e.renderer.$getLongestLine()+2*e.renderer.$padding-e.renderer.$size.scrollerWidth:-1}},{key:"_handleHorizontalScrollEvent",value:function(e,t,n){var r;r="renderer"in e?n/this._getAceMaxScrollWidth(e):n/(e.scrollWidth-e.offsetWidth);for(var o=this._groupScrollpropsHM[t],a=0;a<o.scrollers.length;a++){var i=o.scrollers[a];if(i!==e)if("renderer"in i){var s=this._getAceMaxScrollWidth(i);Math.round(r*s);i.session.getScrollLeft(),i.session.getScrollLeft()!==n&&(this._blockNextScrollEvent.set(i,!0),i.session.setScrollLeft(n))}else{var l=i.scrollWidth-i.offsetWidth;Math.round(r*l);i.scrollLeft,i.scrollLeft!==n&&(this._blockNextScrollEvent.set(i,!0),i.scrollLeft=n)}}}},{key:"setScrollerGroup",value:function(e,t){this._groupScrollpropsHM[e]={scrolltype:t,scrollers:this._groupScrollpropsHM[e]?this._groupScrollpropsHM[e].scrollers:[]}}},{key:"registerScroller",value:function(e,t){var n=this,r=this._groupScrollpropsHM[t];if(!r)throw new Error('Error: attempt to register scroll sync on unknown group "'.concat(t,'"\n                    please register group first with setScrollerGroup'));if(r.scrollers.includes(e))throw new Error('Error: attempt to readd  scroller to group "'.concat(t,'"'));r.scrollers.push(e),"renderer"in e?((r.scrolltype===L.both||L.horizontal)&&e.session.on("changeScrollLeft",(function(r){n._blockNextScrollEvent.get(e)||n._handleHorizontalScrollEvent(e,t,Math.round(e.session.getScrollLeft())),n._blockNextScrollEvent.set(e,!1)})),r.scrolltype===L.both||L.vertical):((r.scrolltype===L.both||L.horizontal)&&(e.onscroll=function(r){r.target&&!n._blockNextScrollEvent.get(e)&&n._handleHorizontalScrollEvent(e,t,r.target.scrollLeft),n._blockNextScrollEvent.set(e,!1)}),r.scrolltype===L.both||L.vertical)}}],[{key:"getInstance",value:function(){return this.singleton||(this.singleton=new e),this.singleton}}]),e}();S.singleton=void 0;var C=n(15),E=n.n(C),b=n(7),k=n.n(b),w=T("aa"),O=T("nt");function T(e){return Object.keys(k.a).reduce((function(t,n){if(-1!==n.indexOf(e+"StyClass_")){var r=n.split(e+"StyClass_")[1],o=k.a[e+"StyColorOrder_"+r].split(", "),a=k.a[e+"StyColors_"+r].split(", "),i=k.a[e+"StyDesc_"+r];t.push({commonName:r,description:i,className:k.a[n],backgroundAlpha:parseFloat(k.a[e+"StyBGAlpha_"+r]),colors:Object.fromEntries(o.map((function(e,t){return[o[t],a[t]]})))})}return t}),[])}var A=function(){function e(t,n,r,o){Object(h.a)(this,e),this.key=t,this.description=n,this.className=r,this.allColorSchemes=o}return Object(d.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();A.AMINOACID=new A("aminoacid-alignment","Amino Acid Sequences",k.a.aaAlignTypeClass,w),A.NUCLEOTIDE=new A("nucleotide-alignment","Nucleotide Sequences",k.a.ntAlignTypeClass,O),A.list=[A.AMINOACID,A.NUCLEOTIDE];var N=function(){function e(t,n,r){Object(h.a)(this,e),this.key=t,this.description=n,this.className=r}return Object(d.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();N.ALL=new N("all","All",k.a.styPosAllClass),N.QUERY=new N("query","Same as Query",k.a.styPosQueryClass),N.QUERY_DIFF=new N("query-diff","Different from Query",k.a.styPosQueryDiffClass),N.CONSENSUS=new N("consensus","Same as Consensus",k.a.styPosConsensusClass),N.CONSENSUS_DIFF=new N("consensus-diff","Different from Consensus",k.a.styPosConsensusDiffClass),N.list=[N.ALL,N.QUERY,N.QUERY_DIFF,N.CONSENSUS,N.CONSENSUS_DIFF];var _=function(){function e(t,n,r){Object(h.a)(this,e),this.key=t,this.description=n,this.className=r}return Object(d.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();_.BOTH=new _("both","Style Background and Letters",""),_.LETTER_ONLY=new _("letter-only","Only Style Letters",k.a.transparentBackgroundClass),_.BACKGROUND_ONLY=new _("background-only","Only Style Background",k.a.transparentLetterClass),_.list=[_.BOTH,_.LETTER_ONLY,_.BACKGROUND_ONLY];var j,x=function(){function e(){Object(h.a)(this,e),this.alignmentType=void 0,this.colorScheme=void 0,this.positionsToStyle=void 0,this.residueDetail=void 0}return Object(d.a)(e,null,[{key:"fromAlignmentType",value:function(e){return e===A.AMINOACID?new q:new M}}]),e}(),q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.ALL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.BOTH;Object(h.a)(this,e),this.colorScheme=t,this.positionsToStyle=n,this.residueDetail=r,this.allColorSchemes=w,this.alignmentType=A.AMINOACID},M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.ALL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.BOTH;Object(h.a)(this,e),this.colorScheme=t,this.positionsToStyle=n,this.residueDetail=r,this.allColorSchemes=O,this.alignmentType=A.NUCLEOTIDE},D=(k.a.transparentLetterClass,k.a.transparentBackgroundClass,k.a.acePrefix);function B(e,t){var n=e.split("/");if(3!==n.length||"ace"!==n[0]||"mode"!==n[1])throw Error("ace mode name must be of the form '/ace/mode/MODENAME'");var r=e.split("/")[2];E.a.define("ace/mode/"+r+"_highlight_rules",(function(e,n,r){var o=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,i=function(){for(var e={},n=function(n){var r=0===n?"start":"pos"+n,o=n===t.getMaxSequenceLength()-1?"start":"pos"+(n+1);e[r]=[{token:function(e){return function(e,t,n){return e+(t?"."+k.a.preAceConsensusClass:"")+(n?"."+k.a.preAceQueryClass:"")}(e,e===t.getConsensus()[n].letter,e===t.getTargetSequence().sequence[n])},regex:".",next:o}]},r=0;r<t.getMaxSequenceLength();r++)n(r);this.$rules=e};o.inherits(i,a),n.AlignmentHighlightRules=i})),E.a.define("ace/mode/"+r,(function(e,t,n){var o=e("../lib/oop"),a=e("../mode/text").Mode,i=e("../tokenizer").Tokenizer,s=e("ace/mode/"+r+"_highlight_rules").AlignmentHighlightRules,l=function(){this.$tokenizer=new i((new s).getRules())};o.inherits(l,a),function(){}.call(l.prototype),t.Mode=l}))}!function(e){e[e.query=0]="query",e[e.consensus=1]="consensus",e[e.alignment=2]="alignment",e[e.position=3]="position"}(j||(j={}));var H,R=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).editor=void 0,n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t,n,r,o;this.props.fontSize+"px"!==(null===(t=this.editor)||void 0===t?void 0:t.getFontSize())&&(null===(n=this.editor)||void 0===n||n.setFontSize(this.props.fontSize+"px"),this.props.characterSizeChanged&&(null===(r=this.editor)||void 0===r?void 0:r.renderer.characterWidth)&&this.props.characterSizeChanged(null===(o=this.editor)||void 0===o?void 0:o.renderer.characterWidth));this.props.sortBy!==e.sortBy&&this.props.type===j.alignment&&(this.editor.selectAll(),this.editor.removeLines(),this.editor.insert(this.props.alignment.getSequences(this.props.sortBy).map((function(e){return e.sequence})).join("\n")))}},{key:"setupAndInsertAceEditor",value:function(e){var t=this;if(this.editor=E.a.edit(e),this.editor.setShowPrintMargin(!1),this.editor.setReadOnly(!0),this.editor.setHighlightActiveLine(!1),this.editor.setHighlightGutterLine(!1),this.editor.setFontSize(this.props.fontSize+"px"),this.editor.renderer.setShowGutter(!1),this.editor.renderer.setPadding(0),this.editor.renderer.$cursorLayer.element.style.display="none",[j.query,j.alignment,j.consensus].includes(this.props.type)){var n="ace/mode/"+this.props.alignment.getName();B(n,this.props.alignment),this.editor.session.setMode(n)}return this.editor.on("mousemove",(function(e){if(t.editor){var n=e.getDocumentPosition(),r=t.editor.renderer.textToScreenCoordinates(n.row,n.column),o=t.editor.renderer.characterWidth,a=document.getElementById("column_mouseover");a&&(a.style.left=r.pageX-3-2+"px",a.style.width=o+6+"px",a.style.display="block"),t.setState({mouseRow:n.row,mouseColumn:n.column,mousePageX:r.pageX,mousePageY:r.pageY,mouseContainerX:o*n.column-t.editor.session.getScrollLeft(),characterWidth:o})}})),this.editor}},{key:"insertDataIntoEditor",value:function(){if(this.editor)if(this.props.type===j.query)this.editor.insert(this.props.alignment.getTargetSequence().sequence);else if(this.props.type===j.consensus)this.editor.insert(this.props.alignment.getConsensus().map((function(e){return e.letter})).join(""));else if(this.props.type===j.alignment)this.editor.insert(this.props.alignment.getSequences(this.props.sortBy).map((function(e){return e.sequence})).join("\n"));else if(this.props.type===j.position){var e=this.props.alignment.getMaxSequenceLength();this.editor.insert(t.generateTextualRuler(e))}else this.editor.insert("invalid type passed to AceEditorComponent")}},{key:"divLoaded",value:function(e){e&&!this.editor&&(this.setupAndInsertAceEditor(e),this.insertDataIntoEditor(),e.classList.add("loaded"),this.props.editorLoaded(this.editor))}},{key:"mouseExited",value:function(){var e=document.getElementById("column_mouseover");e&&(e.style.display="none"),this.setState({mouseContainerX:void 0})}},{key:"changeZoom",value:function(e){}},{key:"render",value:function(){var e,t=this;return this.state&&"number"===typeof this.state.mouseContainerX&&(e=a.a.createElement("div",{style:{position:"absolute",left:this.state.mouseContainerX+this.state.characterWidth/2-20,width:40,bottom:-30,zIndex:1100}},a.a.createElement("div",{style:{textAlign:"center",padding:2,fontWeight:"bold",background:"white",border:"solid 1px black"}},this.state.mouseColumn+1))),a.a.createElement("div",{className:this.props.topLevelClassNames,onMouseLeave:function(){return t.mouseExited()}},a.a.createElement("div",{id:this.props.id,ref:function(e){return t.divLoaded(e)}}),e)}}],[{key:"generateTextualRuler",value:function(e){for(var t="",n=1;n<=e+1;n++){var r=n%10===0;if(t+=r?"|":!r&&n%5===0?":":".",r){var o=""+n,a=t.length-o.length-1;a<0||(t=t.substr(0,a)+o+"|")}}return t}}]),t}(a.a.Component),I=function(){function e(){Object(h.a)(this,e),this.letterToGlyphHM={A:e.A,B:e.B,C:e.C,D:e.D,E:e.E,F:e.F,G:e.G,H:e.H,I:e.I,J:e.J,K:e.K,L:e.L,M:e.M,N:e.N,O:e.O,P:e.P,Q:e.Q,R:e.R,S:e.S,T:e.T,U:e.U,V:e.V,W:e.W,X:e.X,Y:e.Y,Z:e.Z}}return Object(d.a)(e,null,[{key:"glyphFromChar",value:function(t){return e.singleton||(e.singleton=new e),e.singleton.letterToGlyphHM[t]}}]),e}();I.singleton=void 0,I.A=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 33 0 L 66 0 L 100 100 L 75 100 L 66 75 L 33 75 L 25 100 L 0 100"})),a.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 41 55 L 50 25 L 58 55 L 41 55"}))},I.B=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 105 50 105 100 80 100 L 00 100 L 0 0"})),a.a.createElement("path",{key:e.key+"_p2",transform:e.transform,d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15",fill:"#ffffff"}),a.a.createElement("path",{key:e.key+"_p3",transform:e.transform,d:"M 20 65 L 70 65 C 80 65 80 85 70 85 L 20 85 L 20 65",fill:"#ffffff"}))},I.C=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 10 75 28 L 100 28"}))},I.D=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 60 0 C 110 0 110 100 60 100 L 0 100 L 0 0"})),a.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 40 15 C 85 15 85 85 40 85 L 20 85 L 20 15"}))},I.E=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 90 40 L 90 60 L 20 60 L 20 80 L 100 80 L 100 100 L 0 100 L 0 0"}))},I.F=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 80 40 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},I.G=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 100 48 L 55 48 L 55 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 5 75 28 L 100 28"}))},I.H=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 80 40 L 80 0 L 100 0 L 100 100 L 80 100 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},I.I=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 40 0 L 60 0 L 60 100 L 40 100 L 40 0"}))},I.J=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60"}))},I.K=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 75 0 L 100 0 L 50 50 L 100 100 L 75 100 L 30 65 L 20 75 L 20 100 L 0 100 L 0 0"}))},I.L=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 100 L 100 100 L 100 80 L 20 80 L 20 0 L 0 0"}))},I.M=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 35 L 80 0 L 100 0 L 100 100 L 80 100 L 80 30 L 50 65 L 20 30 L 20 100 L 0 100 L 0 0"}))},I.N=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 0 0 L 20 0 L 80 75 L 80 0 L 100 0 L 100 100 L 80 100 L 20 25 L 20 100 L 0 100"}))},I.O=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},e)),a.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}))},I.P=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 L 20 50 L 20 100 L 0 100 L 0 0"})),a.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},I.Q=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},Object(u.a)({},e,{key:e.key+"_c1"}))),a.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}),a.a.createElement("path",Object.assign({d:"M 85 100 L 55 70 L 70 55 L 100 85 L 85 100"},e)))},I.R=function(e){return a.a.createElement("g",{key:e.key+"_g"},a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 100 50 100 70 100 70 L 100 100 L 80 100 L 80 80 C 80 80 80 60 50 60 L 20 60 L 20 100 L 0 100 L 0 0"})),a.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},I.S=function(e){return e.stroke||(e.stroke=e.fill),e.strokeOpacity||(e.strokeOpacity=e.fillOpacity),a.a.createElement("path",Object.assign({fill:"#ffffff"},e,{strokeWidth:"18",d:"M92 26 A43 20 0 1 0 43 46 A42 23 0 1 1 9 68"}))},I.T=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 20 L 35 20 L 35 100 L 65 100 L 65 20 L 100 20 L 100 0 L 0 0"}))},I.U=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60 L 25 0 L 0 0"}))},I.V=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 80 L 80 0 L 100 0 L 60 100 L 40 100 L 0 0"}))},I.W=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 30 70 L 50 30 L 70 70 L 80 0 L 100 0 L 90 100 L 70 100 L 50 65 L 30 100 L 10 100 L 0 0"}))},I.X=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 40 L 80 0 L 100 0 L 70 50 L 100 100 L 80 100 L 50 60 L 20 100 L 0 100 L 30 50 L 0 0"}))},I.Y=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 45 L 80 0 L 100 0 L 60 60 L 60 100 L 40 100 L 40 60 L 0 0"}))},I.Z=function(e){return a.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 35 80 L 100 80 L 100 100 L 0 100 L 0 80 L 65 20 L 0 20 L 0 0"}))},function(e){e.LETTERS="letter stack",e.BARS="bar plot"}(H||(H={}));var P=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).scrollerDiv=void 0,n.loaded=!1,n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"divLoaded",value:function(e){e&&!this.scrollerDiv&&(this.scrollerDiv=e,this.props.logoLoaded(this.scrollerDiv))}},{key:"shouldComponentUpdate",value:function(e){return!1===this.loaded||this.props.logoType!==e.logoType||this.props.glyphWidth!==e.glyphWidth}},{key:"render",value:function(){var e=this;if(!this.props.alignment||!this.props.glyphWidth)return null;var t=this.props.alignment.getPositionalLetterCounts(),n=this.props.alignment.getSortedAlphaLetters(),r=[];t.forEach((function(e,t){var o=Object.keys(e).reduce((function(t,n){return t+=e[n]}),0),a=n.map((function(t){var n=0;return t in e&&(n=e[t]/o),n}));r.push(a)}));var o=n.map((function(e){return{letter:e,classNames:D+e}})),i=r.map((function(e,t){return e.map((function(e,t){return{frequency:e,letter:o[t]}})).filter((function(e){return 0!==e.frequency})).sort((function(e,t){return e.frequency>t.frequency?1:-1}))})),s=r.length*this.props.glyphWidth;this.loaded=!0;return a.a.createElement("div",{id:this.props.id,ref:function(t){return e.divLoaded(t)}},a.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(i.length," 100"),style:{width:s,height:100},xmlns:"http://www.w3.org/2000/svg"},i.map((function(t,n){return a.a.createElement("g",{transform:"translate(".concat(n,",0)"),key:"p_"+n},function(t){var n=100,r=2/i.length;return t.map((function(t,o){return n-=100*t.frequency,e.props.logoType===H.BARS?a.a.createElement("rect",{width:"100",height:"100",transform:"translate(0, ".concat(n,") scale(").concat(r,",").concat(t.frequency,")"),className:t.letter.classNames,key:"idxrect_".concat(o)}):I.glyphFromChar(t.letter.letter)({className:t.letter.classNames,transform:"translate(0, ".concat(n,") scale(").concat(r,",").concat(t.frequency,")"),key:"idxglyph_".concat(o)})}))}(t))}))))}}]),t}(a.a.Component),W=n(28),z=n(12),G=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).scrollerDiv=void 0,n.state={isHovered:!1},n.handleSvgHover=n.handleSvgHover.bind(Object(z.a)(n)),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleSvgHover",value:function(e){this.setState({isHovered:e})}},{key:"computeEntropy",value:function(e,t,n,r){return e.reduce((function(e,r){return r in t&&(e+=t[r]*Math.log(t[r]/n[r])),e}),0)}},{key:"createConservationCountGs",value:function(){var e=this,t=[],n=this.props.alignment.getSortedAlphaLetters(),r=this.props.alignment.getPositionalLetterCounts(!0,n),o=this.props.alignment.getGlobalAlphaLetterCounts(!0,n),i=Array.from(r).map((function(t){var r=Object(g.a)(t,2),a=(r[0],r[1]);return e.computeEntropy(n,a,o)})),s=Math.max.apply(Math,Object(W.a)(i));return i.map((function(e){return e/s*100})).forEach((function(e,n){t.push(a.a.createElement("g",{transform:"translate(".concat(n,",").concat(100-e,")"),key:n},a.a.createElement("rect",{width:.5,height:"".concat(e)})))})),t}},{key:"createGapCountGs",value:function(e){for(var t=[],n=this.props.alignment.getSequences().length,r=this.props.alignment.getGapsPerColumn(),o=0;o<e;o++){var i=r[o]/n*100;t.push(a.a.createElement("g",{transform:"translate(".concat(o+.5,",").concat(100-i,")"),key:o},a.a.createElement("rect",{width:.5,height:i})))}return t}},{key:"divLoaded",value:function(e){e&&!this.scrollerDiv&&(this.scrollerDiv=e,this.props.conservationPlotLoaded(this.scrollerDiv))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;if(!this.props.alignment||!this.props.characterWidth)return null;var t=this.props.alignment.getMaxSequenceLength(),n=this.props.characterWidth*t,r=this.state.isHovered?"conservation hovered":"conservation";return a.a.createElement("div",null,a.a.createElement("div",{style:{backgroundColor:"rgba(255,255,255,0.9)",border:"solid 1px black",position:"absolute",padding:"3px",top:0,right:0,color:"red",visibility:this.state.isHovered?"visible":"hidden",zIndex:1e3}},a.a.createElement("span",{style:{color:"#000000"}},"Entropy"),a.a.createElement("span",{style:{color:"#b7b7b7",paddingLeft:10}},"# Gaps")),a.a.createElement("div",{id:this.props.id,ref:function(t){return e.divLoaded(t)}},a.a.createElement("div",{className:"svg_container"},a.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(t," 100"),style:{width:n,height:100},className:r,xmlns:"http://www.w3.org/2000/svg",onMouseEnter:function(){return e.handleSvgHover(!0)},onMouseLeave:function(){return e.handleSvgHover(!1)}},a.a.createElement("g",{className:"gapCount"},this.createGapCountGs(t)),a.a.createElement("g",{className:"entropy"},this.createConservationCountGs())))))}}]),t}(a.a.Component);function U(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(t)return{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)};throw new Error("Bad Hex")}var F=function(){function e(t,n,r){Object(h.a)(this,e),this.singleLetterCode=t,this.threeLetterCode=n,this.fullName=r,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.threeLetterCode=n,this.fullName=r,this.glyph=I.glyphFromChar(t),this.colors=w.reduce((function(e,n){var r=Object.entries(n.colors).find((function(e){var n=Object(g.a)(e,2),r=n[0];n[1];return r===t})),o="#ffffff";return r&&(o=r[1]),e[n.commonName]={hexString:o,rgb:U(o),backgroundAlpha:n.backgroundAlpha},e}),{})}return Object(d.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t in this.bySingleLetterCode?e.bySingleLetterCode[t]:e.UNKNOWN}},{key:"fromThreeLetterCode",value:function(t){return t in this.byThreeLetterCode?e.byThreeLetterCode[t]:e.UNKNOWN}}]),e}();F.canonicalAminoAcids=[new F("A","ALA","Alanine"),new F("R","ARG","Arginine"),new F("N","ASN","Asparagine"),new F("D","ASP","Aspartic Acid"),new F("C","CYS","Cysteine"),new F("Q","GLU","Glutamine"),new F("E","GLN","Glutamic Acid"),new F("G","GLY","Glycine"),new F("H","HIS","Histidine"),new F("I","ILE","Isoleucine"),new F("L","LEU","Leucine"),new F("K","LYS","Lysine"),new F("M","MET","Methionine"),new F("F","PHE","Phenylalanine"),new F("P","PRO","Proline"),new F("S","SER","Serine"),new F("T","THR","Threonine"),new F("W","TRP","Tryptophan"),new F("Y","TYR","Tyrosine"),new F("V","VAL","Valine"),new F("X","UKN","Unknown Amino Acid")],F.bySingleLetterCode=F.canonicalAminoAcids.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),F.byThreeLetterCode=F.canonicalAminoAcids.reduce((function(e,t){return e[t.threeLetterCode]=t,e}),{}),F.UNKNOWN=F.bySingleLetterCode.X;var Y=function(){function e(t,n){Object(h.a)(this,e),this.singleLetterCode=t,this.fullName=n,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.fullName=n,this.glyph=I.glyphFromChar(t),this.colors=O.reduce((function(e,n){var r=Object.entries(n.colors).find((function(e){var n=Object(g.a)(e,2),r=n[0];n[1];return r===t})),o="#ffffff";return r&&(o=r[1]),e[n.commonName]={hexString:o,rgb:U(o),backgroundAlpha:n.backgroundAlpha},e}),{})}return Object(d.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t in this.bySingleLetterCode?e.bySingleLetterCode[t]:e.UNKNOWN}}]),e}();Y.allNucleotides=[new Y("A","Adenine"),new Y("C","Cytosine"),new Y("G","Guanine"),new Y("T","Thymidine"),new Y("U","Uracil"),new Y("R","Purine"),new Y("Y","Pyrimidine"),new Y("X","Unknown Nucleotide")],Y.bySingleLetterCode=Y.allNucleotides.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),Y.UNKNOWN=Y.bySingleLetterCode.X;var X=n(1),Q=n(13),K=n(27),V=Object(Q.PixiComponent)("AlignmentHighlighter",{create:function(e){return new X.Graphics},applyProps:function(e,t,n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.fillColor,l=n.fillAlpha;e.clear(),e.beginFill(s,l),e.drawRect(r,o,a,i),e.endFill()}}),$=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).app=void 0,n.scaleX=1,n.scaleY=1,n.renderAlignmentHighlighter=function(e){return a.a.createElement(V,Object(u.a)({fillColor:16711680,fillAlpha:.75},e))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"sliderChanged",value:function(e,t){this.app&&this.app.stage.children.forEach((function(n){"x"===t?n.scale.x=e:n.scale.y=e}))}},{key:"render",value:function(){var e=this;if(!this.props.alignment)return null;var t=this.props.alignment.getSequences().length,n=this.props.alignment.getMaxSequenceLength();X.settings.SCALE_MODE=X.SCALE_MODES.NEAREST;var r=this.props.highlightRows?this.props.highlightRows[1]-this.props.highlightRows[0]:void 0;return a.a.createElement("div",{id:this.props.id},a.a.createElement(Q.Stage,{width:485,height:650,options:{}},a.a.createElement(Q.AppContext.Consumer,null,(function(t){return e.app=t,a.a.createElement(a.a.Fragment,null)})),a.a.createElement(Q.AppContext.Consumer,null,(function(o){return a.a.createElement(J,{app:o,numColumns:n,numRows:t,mouseDown:e.props.mouseDown},a.a.createElement(Z,{id:"tiled-alignment",alignment:e.props.alignment,alignmentType:e.props.alignmentType,sortBy:e.props.sortBy,colorScheme:e.props.colorScheme,positionsToStyle:e.props.positionsToStyle}),r?a.a.createElement(a.a.Fragment,null,e.renderAlignmentHighlighter({x:0,y:e.props.highlightRows[0],width:n/100,height:r}),e.renderAlignmentHighlighter({x:n-n/100,y:e.props.highlightRows[0],width:n/100,height:r})):a.a.createElement(a.a.Fragment,null))}))))}}]),t}(a.a.Component);$.defaultProps={mouseDown:function(){}};var Z=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.colorScheme!==this.props.colorScheme||e.positionsToStyle!==this.props.positionsToStyle||e.sortBy!==this.props.sortBy}},{key:"render",value:function(){if(!this.props.alignment)return null;for(var e=this.props,t=e.alignment,n=e.alignmentType,r=e.colorScheme,o=e.positionsToStyle,i=e.sortBy,s=t.getSequences(i),l=t.getMaxSequenceLength(),c=s.length,u={fullWidth:l,fullHeight:c,targetTileWidth:Math.min(400,l),targetTileHeight:Math.min(400,c)},h=this.initializeTiledImages(u),d=0;d<h.numYTiles;d++)for(var p=0;p<h.numXTiles;p++){var m=this.generateCanvasForTile(p,d,u.targetTileWidth,u.targetTileHeight,h,s);h.tiles.push(m)}return console.log("CANVAS rerender ["+i.key+"]",s),a.a.createElement(a.a.Fragment,null,h.tiles.map((function(e){return a.a.createElement(Q.Sprite,{source:e.image,x:e.pixelX,y:e.pixelY,key:"".concat(e.tileX,"_\n                  ").concat(e.tileY,"_\n                  ").concat(r.commonName,"_\n                  ").concat(o.key,"_\n                  ").concat(n.key,"_\n                  ").concat(i.key)})})))}},{key:"colorCanvasWithSequence",value:function(e,t,n,r,o){for(var a=0,i=0;i<n.height;i++)for(var s=r[i+o.seqY],l=0;l<n.width;l++){var c=s.sequence[l+o.letterX],u=this.getCurrentMoleculeColors(c,l,o);e.data[a]=u.rgb.red,e.data[a+1]=u.rgb.green,e.data[a+2]=u.rgb.blue,e.data[a+3]=255,a+=4}t.putImageData(e,0,0)}},{key:"generateCanvasForTile",value:function(e,t,n,r,o,a){var i=document.createElement("canvas");i.height=t===o.numYTiles-1?o.lastTileHeight:r,i.width=e===o.numXTiles-1?o.lastTileWidth:n;var s={seqY:t*r,letterX:e*n},l=i.getContext("2d");null===l||void 0===l||l.fillRect(0,0,i.width,i.height);var c=null===l||void 0===l?void 0:l.getImageData(0,0,i.width,i.height);return c&&l&&this.colorCanvasWithSequence(c,l,i,a,s),{tileX:e,tileY:t,pixelX:s.letterX,pixelY:s.seqY,width:i.width,height:i.height,image:i}}},{key:"getCurrentMoleculeColors",value:function(e,t,n){var r=this.props,o=r.alignment,a=r.alignmentType,i=r.colorScheme,s=o.getConsensus(),l=o.getTargetSequence().sequence,c=a===A.AMINOACID?F:Y,u=c.UNKNOWN;if(this.props.positionsToStyle===N.ALL)u=c.fromSingleLetterCode(e);else{var h=s[t+n.letterX].letter===e,d=l[t+n.letterX]===e;(this.props.positionsToStyle===N.CONSENSUS&&h||this.props.positionsToStyle===N.CONSENSUS_DIFF&&!h||this.props.positionsToStyle===N.QUERY&&d||this.props.positionsToStyle===N.QUERY_DIFF&&!d)&&(u=c.fromSingleLetterCode(e))}return u.colors[i.commonName]}},{key:"initializeTiledImages",value:function(e){var t=e.targetTileWidth,n=void 0===t?0:t,r=e.targetTileHeight,o=void 0===r?0:r,a=e.fullWidth,i=void 0===a?0:a,s=e.fullHeight,l=void 0===s?0:s;return{targetTileWidth:n,targetTileHeight:o,lastTileWidth:i%n!==0?i%n:n,lastTileHeight:l%o!==0?l%o:o,numXTiles:i%n!==0?Math.floor(i/n)+1:Math.floor(i/n),numYTiles:l%o!==0?Math.floor(l/o)+1:Math.floor(l/o),tiles:[]}}}]),t}(a.a.Component),J=Object(Q.PixiComponent)("PixiViewport",{create:function(e){var t=e.app;t.renderer.backgroundColor=16777215;var n=new K.a({screenWidth:t.renderer.width,screenHeight:t.renderer.height,worldWidth:e.numColumns,worldHeight:e.numRows,interaction:t.renderer.plugins.interaction}).drag().pinch().wheel().decelerate().clamp({direction:"all"}).bounce({friction:.1,time:500,underflow:"center"}).clampZoom({maxHeight:e.app.renderer.height,maxWidth:e.app.renderer.width});return n.on("clicked",(function(t){e.mouseDown&&e.mouseDown(t.world.x,t.world.y)})),n}}),ee=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e)))._handleCharacterSizeChanged=function(e){n.setState({aceCharacterWidth:e})},n._aceEditorLoaded=function(e,t){console.log("_aceEditorLoaded id ="+e+", metrics:",t.renderer.$fontMetrics),S.getInstance().registerScroller(t,"horiz"),n.setState({aceCharacterWidth:t.renderer.characterWidth,aceEditors:[t].concat(n.state.aceEditors)}),console.log(""),"ace-alignment"===e&&t.renderer.on("afterRender",(function(){setTimeout((function(){n.setState({alignmentEditorFirstRow:t.renderer.getFirstFullyVisibleRow(),alignmentEditorLastRow:t.renderer.getLastFullyVisibleRow()})}))}))},n.renderSequenceLogo=function(){return a.a.createElement("div",{className:"logo_box ".concat(n.props.style.alignmentType.className," ")+"".concat(n.props.style.colorScheme.className," ")+"".concat(N.ALL.className)},a.a.createElement(P,{id:"sequence_logo",alignment:n.props.alignment,glyphWidth:n.state.aceCharacterWidth,logoType:n.props.logoPlotStyle,logoLoaded:function(e){n._elementLoaded("sequence_logo",e)}}))},n.renderConservationBox=function(){return a.a.createElement("div",{className:"conservation_box"},a.a.createElement(G,{id:"sequence_conservation",alignment:n.props.alignment,characterWidth:n.state.aceCharacterWidth,conservationPlotLoaded:function(e){n._elementLoaded("sequence_conservation",e)}}))},n.renderConsensusQueryBox=function(){return a.a.createElement("div",{className:"consensusseq_box"},a.a.createElement(R,{id:"ace-consensusseq",type:j.consensus,alignment:n.props.alignment,fontSize:n.props.zoomLevel,sortBy:n.props.sortBy,topLevelClassNames:[n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),editorLoaded:function(e){n._aceEditorLoaded("ace-consensusseq",e)}}))},n.renderQuerySeqBox=function(){return a.a.createElement("div",{className:"queryseq_box"},a.a.createElement(R,{id:"ace-queryseq",type:j.query,alignment:n.props.alignment,fontSize:n.props.zoomLevel,sortBy:n.props.sortBy,topLevelClassNames:[n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),editorLoaded:function(e){n._aceEditorLoaded("ace-queryseq",e)}}))},n.renderPositionBox=function(){return a.a.createElement("div",{className:"position_box"},a.a.createElement(R,{id:"ace-positions",type:j.position,alignment:n.props.alignment,fontSize:n.props.zoomLevel,sortBy:n.props.sortBy,editorLoaded:function(e){n._aceEditorLoaded("ace-positions",e)}}))},n.renderDatatableBox=function(){return a.a.createElement("div",{className:"datatable_box",id:"datatable"},a.a.createElement($,{id:"alignment_canvas",alignment:n.props.alignment,alignmentType:n.props.style.alignmentType,positionsToStyle:n.props.style.positionsToStyle,colorScheme:n.props.style.colorScheme,sortBy:n.props.sortBy,mouseDown:function(e,t){console.log("someone clicked on the canvas:"+e+","+t)},highlightRows:void 0!==n.state.alignmentEditorFirstRow&&void 0!==n.state.alignmentEditorLastRow?[n.state.alignmentEditorFirstRow,n.state.alignmentEditorLastRow]:void 0}))},n.renderAlignmentBox=function(){return a.a.createElement("div",{className:"alignment_box"},a.a.createElement(R,{id:"ace-alignment",type:j.alignment,alignment:n.props.alignment,fontSize:n.props.zoomLevel,sortBy:n.props.sortBy,topLevelClassNames:[n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),characterSizeChanged:n._handleCharacterSizeChanged,editorLoaded:function(e){n._aceEditorLoaded("ace-alignment",e)}}))},n.state={aceEditors:[],aceCharacterWidth:0},S.getInstance().setScrollerGroup("horiz",L.horizontal),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"_elementLoaded",value:function(e,t){console.log("_elementLoaded id ="+e),S.getInstance().registerScroller(t,"horiz")}},{key:"render",value:function(){return this.props.alignment?a.a.createElement("div",{className:"AlignmentViewer"},a.a.createElement("div",{id:"column_mouseover"}),this.renderConservationBox(),this.renderSequenceLogo(),this.renderConsensusQueryBox(),this.renderQuerySeqBox(),this.renderPositionBox(),this.renderDatatableBox(),this.renderAlignmentBox()):null}}]),t}(a.a.Component),te=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).renderSettingsBox=function(e){return a.a.createElement("div",{className:"settings_box"},a.a.createElement("form",null,a.a.createElement("div",null,a.a.createElement("h3",null,"AlignmentViewer 2.0 Settings Demo")),n.renderSortControl(),n.renderAlignmentTypeLabel(e),n.renderColorScheme(e),n.renderResidueDetail(e),n.renderPositionStyling(e),n.renderSequenceLogo(),n.renderZoomButtons()))},n.renderSortControl=function(){var e=n.state.sortBy;return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Sort order:"),a.a.createElement("select",{value:e.key,onChange:function(e){return n.setState({sortBy:y.fromKey(e.target.value)})}},y.list.map((function(e){return a.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},n.renderAlignmentTypeLabel=function(e){return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Alignment Type:"),a.a.createElement("select",{value:e.alignmentType.key,onChange:function(e){return n.setState({style:x.fromAlignmentType(A.fromKey(e.target.value))})}},A.list.map((function(e){return a.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},n.renderColorScheme=function(e){return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Style:"),a.a.createElement("select",{value:e.alignmentType.allColorSchemes.indexOf(e.colorScheme),onChange:function(t){n.setState({style:Object(u.a)({},e,{colorScheme:e.alignmentType.allColorSchemes[parseInt(t.target.value)]})})}},e.alignmentType.allColorSchemes.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.description)})))))},n.renderResidueDetail=function(e){return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Residue Detail:"),a.a.createElement("select",{value:e.residueDetail.key,onChange:function(t){n.setState({style:Object(u.a)({},e,{residueDetail:_.fromKey(t.target.value)})})}},_.list.map((function(e){return a.a.createElement("option",{key:e.key,value:e.key},e.description)})))))},n.renderPositionStyling=function(e){return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Positions to Style:"),a.a.createElement("select",{value:N.list.indexOf(e.positionsToStyle),onChange:function(t){n.setState({style:Object(u.a)({},e,{positionsToStyle:N.list[parseInt(t.target.value)]})})}},N.list.map((function(e,t){return a.a.createElement("option",{key:t,value:t},e.description)})))))},n.renderSequenceLogo=function(){var e=n.state.logoPlotStyle;return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Sequence Logo Style:"),a.a.createElement("select",{value:e,onChange:function(e){n.setState({logoPlotStyle:e.target.value})}},Object.values(H).map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))))},n.renderZoomButtons=function(){var e=n.state.zoomLevel;return a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("strong",null,"Zoom:"),a.a.createElement("div",{className:"zoom-level"},a.a.createElement("button",{type:"button",disabled:e<3,onClick:function(t){n.setState({zoomLevel:e-1})}},"-"),e,a.a.createElement("button",{type:"button",disabled:e>15,onClick:function(t){n.setState({zoomLevel:e+1})}},"+"))))},n.state={style:new q,logoPlotStyle:H.LETTERS,zoomLevel:12,sortBy:y.INPUT},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(fetch("".concat("/AlignmentViewer2.0/build","/7fa1c5691376beab198788a726917d48_b0.4.a2m")));case 2:return e=t.sent,t.t0=this,t.t1=v,t.next=7,c.a.awrap(e.text());case 7:t.t2=t.sent,t.t3=t.t1.fromFileContents.call(t.t1,"7fa1c5691376beab198788a726917d48_b0.4.a2m",t.t2),t.t4=new q,t.t5={alignment:t.t3,style:t.t4},t.t0.setState.call(t.t0,t.t5);case 12:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.alignment,n=e.logoPlotStyle,r=e.sortBy,o=e.style,i=e.zoomLevel;return t&&o?a.a.createElement("div",null,this.renderSettingsBox(o),a.a.createElement("div",{className:"av_holder"},a.a.createElement(ee,{alignment:t,style:o,logoPlotStyle:n,zoomLevel:i,sortBy:r}))):null}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports={acePrefix:"ace_",preAceQueryClass:"query",preAceConsensusClass:"consensus",aceQueryClass:"ace_query",aceConsensusClass:"ace_consensus",transparentLetterClass:"transparent-letters",transparentBackgroundClass:"transparent-background",aaAlignTypeClass:"alignment-aa",ntAlignTypeClass:"alignment-nt",styPosAllClass:"alignment-positions-tostyle-all",styPosQueryClass:"alignment-positions-tostyle-query",styPosQueryDiffClass:"alignment-positions-tostyle-query-diff",styPosConsensusClass:"alignment-positions-tostyle-consensus",styPosConsensusDiffClass:"alignment-positions-tostyle-consensus-diff",aaStyClass_Default:"aa-alignment-style-default",aaStyDesc_Default:"Default",aaStyBGAlpha_Default:".25",aaStyColorOrder_Default:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V",aaStyColors_Default:"#3c0,#c00,#60c,#03f,#ff0,#60c,#03f,#3c0,#090,#3c0,#3c0,#c00,#3c0,#090,#3c0,#09f,#09f,#090,#090,#3c0",aaStyClass_Hydrophobicity:"aa-alignment-style-hydrophobicity",aaStyDesc_Hydrophobicity:"Hydrophobicity",aaStyBGAlpha_Hydrophobicity:".25",aaStyColorOrder_Hydrophobicity:"F,I,W,L,V,M,Y,C,A,T,H,G,S,Q,R,K,N,E,P,D",aaStyColors_Hydrophobicity:"red,red,#ff0606,#ff0606,#ff4c4c,#ff5252,#f77,#ffa5a5,#ffc0c0,#e1e1ff,#d0d0ff,#b6b6ff,#a5a5ff,#9595ff,#8787ff,#6969ff,#5959ff,#4f4fff,#1d1dff,blue",ntStyClass_Default:"nt-alignment-style-default",ntStyDesc_Default:"Default",ntStyBGAlpha_Default:".25",ntStyColorOrder_Default:"A,C,G,T,U,R,Y",ntStyColors_Default:"#5050ff,#e00000,#00c000,#e6e600,#c90,#2e8b57,#ff8c00"}}},[[29,1,2]]]);
//# sourceMappingURL=main.dda627bb.chunk.js.map